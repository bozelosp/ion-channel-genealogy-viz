NEURON{SUFFIXImUSEIONkREADekWRITEikRANGEgbar,gIm,ikRANGEdamod,maxMod,level,max2,lev2}UNITS{(S)=(siemens)(mV)=(millivolt)(mA)=(milliamp)}PARAMETER{gbar=0.00001(S/cm2)damod=0maxMod=1level=0max2=1lev2=0}ASSIGNED{v(mV)ek(mV)ik(mA/cm2)gIm(S/cm2)mInfmTaumAlphamBeta}STATE{m}BREAKPOINT{SOLVEstatesMETHODcnexpgIm=gbar*m*modulation()ik=gIm*(v-ek)}DERIVATIVEstates{rates()m'=(mInf-m)/mTau}INITIAL{rates()m=mInf}PROCEDURErates(){LOCALqtqt=2.3^((34-21)/10)UNITSOFFmAlpha=3.3e-3*exp(2.5*0.04*(v--35))mBeta=3.3e-3*exp(-2.5*0.04*(v--35))mInf=mAlpha/(mAlpha+mBeta)mTau=(1/(mAlpha+mBeta))/qtUNITSON}FUNCTIONmodulation(){modulation=1+damod*((maxMod-1)*level+(max2-1)*lev2)if(modulation<0){modulation=0}}