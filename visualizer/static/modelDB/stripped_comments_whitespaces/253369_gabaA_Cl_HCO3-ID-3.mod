NEURON{POINT_PROCESSgabaUSEIONclREADeclWRITEiclVALENCE-1USEIONhco3READehco3WRITEihco3VALENCE-1RANGEtau1,tau2,gRANGEP,iRANGEicl,ihco3,ehco3,eGLOBALtotal}UNITS{(mA)=(milliamp)(nA)=(nanoamp)(mV)=(millivolt)(uS)=(micromho)(mM)=(milli/liter)F=(faraday)(coulombs)R=(k-mole)(joule/degC)}PARAMETER{tau1=.1(ms)<1e-9,1e9>tau2=80(ms)<1e-9,1e9>P=0.18celsius=31(degC)}ASSIGNED{v(mV)icl(nA)ihco3(nA)i(nA)g(uS)factortotal(uS)ecl(mV)ehco3(mV)e(mV)}STATE{A(uS)B(uS)}INITIAL{LOCALtptotal=0if(tau1/tau2>.9999){tau1=.9999*tau2}A=0B=0tp=(tau1*tau2)/(tau2-tau1)*log(tau2/tau1)factor=-exp(-tp/tau1)+exp(-tp/tau2)factor=1/factore=P/(1+P)*ehco3+1/(1+P)*ecl}BREAKPOINT{SOLVEstateMETHODcnexpg=B-Aicl=1/(1+P)*g*(v-ecl)ihco3=P/(1+P)*g*(v-ehco3)i=icl+ihco3e=P/(1+P)*ehco3+P/(1+P)*ecl}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2}NET_RECEIVE(weight(uS)){A=A+weight*factorB=B+weight*factortotal=total+weight}