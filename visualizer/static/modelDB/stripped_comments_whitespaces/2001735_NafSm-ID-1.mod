NEURON{SUFFIXNafSmNONSPECIFIC_CURRENTinaRANGEgnabar,ena,gnaRANGEm_inf,h_infRANGEth,shiftTRANGEamA,bmA,theta_h}UNITS{(mA)=(milliamp)(mV)=(millivolt)}PARAMETER{gnabar=0.06(mho/cm2)amA=14(mV)bmA=38(mV)th=30(ms)theta_h=55kappa_h=7ena=50(mV)celsius=36(degC)shiftT=0(degC)vtraub=-10(mV)vtraub2=-70(mV)}STATE{mh}ASSIGNED{dt(ms)v(mV)ina(mA/cm2)gna(mho/cm2)m_infh_inftau_m(ms)tau_h(ms)shifttadj}BREAKPOINT{SOLVEstatesMETHODcnexpgna=gnabar*m*m*m*hina=gnabar*m*m*m*h*(v-ena)}DERIVATIVEstates{evaluate_fct(v)m'=(m_inf-m)/tau_mh'=(h_inf-h)/tau_h}UNITSOFFINITIAL{tadj=3.0^((celsius-36-shiftT)/10)evaluate_fct(v)m=m_infh=h_inf}PROCEDUREevaluate_fct(v(mV)){LOCALv2,v22,a,bv2=v-vtraubv22=v-vtraub2a=0.4*vtrap(amA-v22,5)b=0.4*vtrap(v22-bmA,5)tau_m=(1*tadj)/(a+b)m_inf=a/(a+b)tau_h=(th*tadj)/(Exp((v2+50)/15)+Exp(-(v2+50)/16))h_inf=1/(1+Exp((v2+theta_h)/kappa_h))}FUNCTIONvtrap(x,y){if(fabs(x/y)<1e-6){vtrap=y*(1-x/y/2)}else{vtrap=x/(Exp(x/y)-1)}}FUNCTIONExp(x){if(x<-100){Exp=0}else{Exp=exp(x)}}