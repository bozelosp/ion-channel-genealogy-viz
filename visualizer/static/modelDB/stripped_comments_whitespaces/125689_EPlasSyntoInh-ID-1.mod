INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{NONSPECIFIC_CURRENTiPOINT_PROCESSEPlasSyntoInhPOINTERampa,nmdaPOINTERPreAvgCaPOINTERpostBRANGEprecellRANGEgAMPA,gmaxAMPA,gNMDA,gmaxNMDAGLOBALErev_1,Erev_2GLOBALAMPANMDARATIO,AMPANMDARATIOPOINTERScaleFactor,Induction,lastprespike,AMPAMAXRANGEscalePOINTERlastpostspikeGLOBALtauLTP,tauLTD,gainLTP,gainLTDRANGEstdp,plastGLOBALterror}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)}PARAMETER{precellErev_1=0(mV)Erev_2=50(mV)AMPANMDARATIO=0.1scale=0tauLTP=20tauLTD=20gainLTP=0.05gainLTD=0.1stdp=0plast=0terror}ASSIGNED{dt(ms)v(mV)i(nA)C(mM)gAMPA(umho)gNMDA(umho)gmaxAMPA(umho)gmaxNMDA(umho)ampanmdaPreAvgCapostBlastprespikeScaleFactorInductionAMPAMAXlastpostspike}INITIAL{terror=dt/10plast=0}BREAKPOINT{SOLVEupdatei=gAMPA*(v-Erev_1)+gNMDA*(v-Erev_2)}PROCEDUREupdate(){gAMPA=gmaxAMPA*ampagNMDA=gmaxNMDA*nmda*postBif(stdp==1){SOLVESTDP}if(Induction==1){SOLVESCALE}VERBATIMreturn0;ENDVERBATIM}PROCEDURESCALE(){LOCALdummyif(scale>0){gmaxAMPA=gmaxAMPA*((ScaleFactor)*scale*PreAvgCa+1)}gmaxAMPA=gmaxAMPA+gmaxAMPA*plastif(scale>0){if(gmaxAMPA>AMPAMAX){gmaxAMPA=AMPAMAX}if(gmaxAMPA<0){gmaxAMPA=0}}gmaxNMDA=gmaxAMPA*AMPANMDARATIOVERBATIMreturn0;ENDVERBATIM}PROCEDURESTDP(){LOCALdummyif(t>lastprespike-terror&&t<lastprespike+terror){dummy=lastpostspike-lastprespikeplast=plast+STDPFunc(dummy)}if(t>lastpostspike-terror&&t<lastpostspike+terror){dummy=lastpostspike-lastprespikeplast=plast+STDPFunc(dummy)}VERBATIMprintf("t=%5.2f(%5.2f/%5.2f)scale=%3.1fSTDP=%3.1fplast=%8.6fW=%8.6f/%8.6f(%5.1f)\n",t,lastprespike,lastpostspike,scale,stdp,plast,gmaxNMDA,gmaxAMPA,precell);ENDVERBATIMVERBATIMreturn0;ENDVERBATIM}FUNCTIONSTDPFunc(ISI){TABLEDEPENDgainLTP,gainLTDFROM-100TO100WITH2010ISI=ISI-5if(ISI<=0.1+terror&&ISI>-100){STDPFunc=-exp(ISI/tauLTD)*gainLTD}elseif(ISI>0.1+terror&&ISI<100){STDPFunc=exp(-ISI/tauLTP)*gainLTP}else{STDPFunc=0}}