UNITS{(molar)=(1/liter)(mA)=(milliamp)(mV)=(millivolt)(mM)=(millimolar)}NEURON{SUFFIXnmdaUSEIONnmdaREADenmdaWRITEinmdaVALENCE2.0NONSPECIFIC_CURRENTiRANGEgnmdabar,enmda,g,gnmda,g1,eq,erevRANGEA_ap,A_bp,C_ap,C_bpGLOBALpinf,pexp}INDEPENDENT{tFROM0TO1WITH1(ms)}PARAMETER{v(mV)dt(ms)g=.0000677254(mho/cm2)erev=-65(mV)gnmdabar=0.006(mho/cm2)enmda=0(mV)Mg=1.8A_ap=0.7A_bp=0.1C_ap=17C_bp=17}STATE{p}ASSIGNED{inmda(mA/cm2)i(mA/cm2)gnmda(mho/cm2)g1(mho/cm2)eq(mV)pinfpexp}BREAKPOINT{SOLVEstatesgnmda=gnmdabar*pg1=g+gnmdainmda=gnmda*(v-enmda)i=g*(v-erev)eq=(g*erev+gnmda*enmda)/g1}UNITSOFFINITIAL{rates(v)p=pinf}PROCEDUREstates(){rates(v)p=p+pexp*(pinf-p)}PROCEDURErates(v){LOCALq10,tinc,alpha,beta,sumTABLEpinf,pexpDEPENDdtFROM-100TO100WITH200q10=1.0tinc=-dt*q10alpha=A_ap*exp(v/C_ap)beta=A_bp*Mg*exp(-v/C_bp)sum=alpha+betapinf=alpha/sumpexp=1-exp(tinc*sum)}UNITSON