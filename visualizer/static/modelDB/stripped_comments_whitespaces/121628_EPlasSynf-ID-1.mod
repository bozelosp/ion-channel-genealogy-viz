INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{NONSPECIFIC_CURRENTiPOINT_PROCESSEPlasSynfPOINTERampa,nmdaRANGEB,precellRANGEgAMPA,gmaxAMPA,gNMDA,gmaxNMDA,Erev_1GLOBALErev_2GLOBALAMPANMDARATIO,AMPANMDARATIO,terrorPOINTERScaleFactor,Induction,lastprespikeRANGEscalePOINTERlastpostspike,GainRANGELTP,Ca,stdpGLOBALLTPGain,LTDGain,tauLTD,tauLTP}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)}PARAMETER{precellErev_1=0(mV)Erev_2=50(mV)AMPAMAX=0.1AMPANMDARATIO=0.1terrorscale=1stdp=1tauLTD=10tauLTP=5LTPGain=100LTDGain=0.1}ASSIGNED{dt(ms)v(mV)i(nA)C(mM)gAMPA(umho)gNMDA(umho)gmaxAMPA(umho)gmaxNMDA(umho)BampanmdalastprespikeScaleFactorInductionlastpostspikeLTPCaGain}INITIAL{terror=dt/10LTP=0.0Ca=0.0}BREAKPOINT{SOLVEupdatei=gAMPA*(v-Erev_1)+gNMDA*(v-Erev_2)}PROCEDUREupdate(){gAMPA=gmaxAMPA*ampaB=mgblock(v)gNMDA=gmaxNMDA*nmda*BVERBATIMreturn0;ENDVERBATIM}PROCEDURESTDP(){LOCALdW,dW2dW=STDPFunc(lastpostspike-lastprespike)if(dW>0){dW2=dW*gmaxAMPA*LTPGain*fabs(AMPAMAX-gmaxAMPA)}else{dW2=dW*gmaxAMPA*LTDGain}gmaxAMPA=gmaxAMPA+dW2if(gmaxAMPA>AMPAMAX){gmaxAMPA=AMPAMAX}gmaxNMDA=gmaxAMPA*AMPANMDARATIOVERBATIMreturn0;ENDVERBATIM}PROCEDURESCALE(){LOCALdummygmaxAMPA=gmaxAMPA*ScaleFactorif(gmaxAMPA>AMPAMAX){gmaxAMPA=AMPAMAX}gmaxNMDA=gmaxAMPA*AMPANMDARATIOVERBATIMreturn0;ENDVERBATIM}FUNCTIONmgblock(v(mV)){TABLEFROM-140TO80WITH1000if(v>-59){mgblock=1/(1+exp((-35-v)/6))}else{mgblock=0}}FUNCTIONSTDPFunc(x){TABLEFROM-100TO100WITH2000if(x>-0.9999&&x<0.9999){STDPFunc=0}elseif(x>-100&&x<0){STDPFunc=-exp(x/tauLTD)}elseif(x>0&&x<100){STDPFunc=exp(-x/tauLTP)}else{STDPFunc=0.}}