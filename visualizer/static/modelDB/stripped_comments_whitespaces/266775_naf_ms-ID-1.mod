NEURON{SUFFIXnaf_msUSEIONnaREADenaWRITEinaRANGEgbar,gna,inaRANGEdamod,maxMod,level}UNITS{(S)=(siemens)(mV)=(millivolt)(mA)=(milliamp)}PARAMETER{gbar=0.0(S/cm2)q=1.8damod=0maxMod=1level=0}ASSIGNED{v(mV)ena(mV)ina(mA/cm2)gna(S/cm2)minfmtau(ms)hinfhtau(ms)}STATE{mh}BREAKPOINT{SOLVEstatesMETHODcnexpgna=gbar*m*m*m*h*modulation()ina=gna*(v-ena)}DERIVATIVEstates{rates()m'=(minf-m)/mtau*qh'=(hinf-h)/htau*q}INITIAL{rates()m=minfh=hinf}PROCEDURErates(){UNITSOFFminf=1/(1+exp((v-(-25))/(-10)))mtau=0.33+1/(exp((v-(-62))/14)+exp((v-(-60))/(-17)))hinf=1/(1+exp((v-(-62))/6))htau=0.6+1/(exp((v-(-44))/8)+exp((v-(-99))/(-44)))UNITSON}FUNCTIONmodulation(){modulation=1+damod*(maxMod-1)*level}