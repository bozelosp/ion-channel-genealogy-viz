NEURON{SUFFIXnothing}VERBATIM#ifndefNRN_VERSION_GTEQ_8_2_0#defineNrnThread_NrnThread#endif#ifdefNRN_MECHANISM_DATA_IS_SOA#defineget_nnode(sec)_nrn_mechanism_get_nnode(sec)#defineget_node(sec,node_index)_nrn_mechanism_get_node(sec,node_index)#else#defineget_nnode(sec)sec->nnode#defineget_node(sec,node_index)sec->pnode[node_index]#endifENDVERBATIMPROCEDUREinit_files(){VERBATIM{}ENDVERBATIM}FUNCTIONGetA(x){VERBATIM{#ifdefined(t)NrnThread*_nt=nrn_threads;#endifSection*sec;Node*nd;sec=chk_access();if(_lx<0.||_lx>1.){hoc_execerror("outofrange,mustbe0<x<=1",(char*)0);}if(_lx==1.){nd=get_node(sec,get_nnode(sec)-1);}else{nd=get_node(sec,(int)(_lx*(double)(get_nnode(sec)-1)));}returnNODEA(nd);}ENDVERBATIM}FUNCTIONGetB(x){VERBATIM{#ifdefined(t)NrnThread*_nt=nrn_threads;#endifSection*sec;Node*nd;sec=chk_access();if(_lx<0.||_lx>1.){hoc_execerror("outofrange,mustbe0<x<=1",(char*)0);}if(_lx==1.){nd=get_node(sec,get_nnode(sec)-1);}else{nd=get_node(sec,(int)(_lx*(double)(get_nnode(sec)-1)));}returnNODEB(nd);}ENDVERBATIM}FUNCTIONSetA(x,a){VERBATIM{#ifdefined(t)NrnThread*_nt=nrn_threads;#endifSection*sec;Node*nd;sec=chk_access();if(_lx<0.||_lx>1.){hoc_execerror("outofrange,mustbe0<x<=1",(char*)0);}if(_lx==1.){nd=get_node(sec,get_nnode(sec)-1);}else{nd=get_node(sec,(int)(_lx*(double)(get_nnode(sec)-1)));}NODEA(nd)=_la;}ENDVERBATIM}FUNCTIONSetB(x,b){VERBATIM{#ifdefined(t)NrnThread*_nt=nrn_threads;#endifSection*sec;Node*nd;sec=chk_access();if(_lx<0.||_lx>1.){hoc_execerror("outofrange,mustbe0<x<=1",(char*)0);}if(_lx==1.){nd=get_node(sec,get_nnode(sec)-1);}else{nd=get_node(sec,(int)(_lx*(double)(get_nnode(sec)-1)));}NODEB(nd)=_lb;}ENDVERBATIM}PROCEDUREMyPrintMatrix(){VERBATIM{Section*sec;FILE*fm;fm=fopen("C:\fmatrix.dat","wb");Node*nd;intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endiffor(ii=0;ii<_nt->end;ii++){nd=_nt->_v_node[ii];fprintf(fm,"%d%1.15f%1.15f%1.15f%1.15f\n",ii,NODEB(nd),NODEA(nd),NODED(nd),NODERHS(nd));}fclose(fm);}ENDVERBATIM}PROCEDUREPrintRHS_D(){VERBATIM{intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endifNode*nd;for(ii=0;ii<_nt->end;ii++){nd=_nt->_v_node[ii];printf("%d,%1.15f%1.15f\n",ii,NODED(nd),NODERHS(nd));}}ENDVERBATIM}PROCEDUREMyTopology(){VERBATIM{intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endiffor(ii=0;ii<_nt->end;ii++){printf("%d%d\n",ii,_nt->_v_parent_index[ii]);}}ENDVERBATIM}PROCEDUREMyTopology2(){VERBATIM{FILE*pFile;intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endifpFile=fopen("parent.txt","w");for(ii=0;ii<_nt->end;ii++){fprintf(pFile,"%d",_nt->_v_parent_index[ii]);}fclose(pFile);}ENDVERBATIM}PROCEDUREMyTopology1(){VERBATIM{FILE*pFile;intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endifpFile=fopen("64TL.csv","w");for(ii=0;ii<_nt->end;ii++){fprintf(pFile,"%d%d\n",ii,_nt->_v_parent_index[ii]);}fclose(pFile);}ENDVERBATIM}PROCEDUREMyPrintMatrix1(){VERBATIM{Section*sec;FILE*fm;fm=fopen("64TL.csv","w");Node*nd;intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endiffor(ii=0;ii<_nt->end;ii++){nd=_nt->_v_node[ii];fprintf(fm,"%d%1.15f%1.15f%1.15f%1.15f\n",ii,NODEB(nd),NODEA(nd),NODED(nd),NODERHS(nd));}fclose(fm);}ENDVERBATIM}PROCEDUREMyPrintMatrix3(){VERBATIM{Section*sec;FILE*fm;fm=fopen("Fmatrix.csv","w");Node*nd;intii;#ifdefined(t)NrnThread*_nt=nrn_threads;#endiffor(ii=0;ii<_nt->end;ii++){nd=_nt->_v_node[ii];fprintf(fm,"%d%1.15f%1.15f%1.15f%1.15f\n",ii,NODEB(nd),NODEA(nd),NODED(nd),NODERHS(nd));}fclose(fm);}ENDVERBATIM}