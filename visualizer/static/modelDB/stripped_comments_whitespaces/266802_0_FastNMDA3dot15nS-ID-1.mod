NEURON{POINT_PROCESSnmdaRANGEonset,tau0,tau1,gmax,e,i,gNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)}PARAMETER{onset=2(ms)tau0=.2(ms)tau1=2(ms)gmax=0.00315(umho)e=5(mV)v(mV)nmg=0.3(1)gamma=0.08(/mV)}ASSIGNED{i(nA)g(umho)}LOCALa[2]LOCALtpeakLOCALadjustLOCALampBREAKPOINT{if(gmax){at_time(onset)g=cond(t)}i=g*(v-e)}FUNCTIONcond(x(ms))(umho){tpeak=tau0*tau1*log(tau0/tau1)/(tau0-tau1)adjust=1/((1-exp(-tpeak/tau0))-(1-exp(-tpeak/tau1)))amp=adjust*gmaxif(x<onset){cond=0}else{a[0]=1-exp(-(x-onset)/tau0)a[1]=1-exp(-(x-onset)/tau1)cond=(amp*(a[0]-a[1])/(1+nmg*exp(-gamma*(v))))}}