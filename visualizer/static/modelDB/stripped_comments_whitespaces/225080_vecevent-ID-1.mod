NEURON{THREADSAFEARTIFICIAL_CELLVecStimPOINTERptr}ASSIGNED{indexetime(ms)ptr}INITIAL{index=0element()if(index>0){net_send(etime-t,1)}}NET_RECEIVE(w){if(flag==1){net_event(t)element()if(index>0){net_send(etime-t,1)}}}DESTRUCTOR{VERBATIMIvocVect*vv=(IvocVect*)(_p_ptr);if(vv){hoc_obj_unref(*vector_pobj(vv));}ENDVERBATIM}PROCEDUREelement(){VERBATIM{IvocVect*vv;inti,size;double*px;i=(int)index;if(i>=0){vv=(IvocVect*)(_p_ptr);if(vv){size=vector_capacity(vv);px=vector_vec(vv);if(i<size){etime=px[i];index+=1.;}else{index=-1.;}}else{index=-1.;}}}ENDVERBATIM}PROCEDUREplay(){VERBATIMIvocVect**pv;IvocVect*ptmp=NULL;if(ifarg(1)){ptmp=vector_arg(1);hoc_obj_ref(*vector_pobj(ptmp));}pv=(IvocVect**)(&_p_ptr);if(*pv){hoc_obj_unref(*vector_pobj(*pv));}*pv=ptmp;ENDVERBATIM}