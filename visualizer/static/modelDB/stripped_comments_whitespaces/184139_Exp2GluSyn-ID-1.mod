NEURON{POINT_PROCESSGluSynRANGEntar,e,i,mg,mgshift,tau1,tau2,tau3,tauD,tauF,f,Pb,Gnmda,GampaNONSPECIFIC_CURRENTi,inmda,iampa}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)(mM)=(milli/liter)}PARAMETER{tau1=0.5(ms)tau2=4(ms)<1e-9,1e9>tau3=42(ms)<1e-9,1e9>e=0.0(mV)mg=1(mM)sh=0(mV)ntar=.3(1)<0,1>f=2(1)<0,1e9>tauF=100(ms)<1e-9,1e9>tauD=500(ms)<1e-9,1e9>Pb=0.3(1)<0,1>}ASSIGNED{v(mV)i(nA)inmda(nA)iampa(nA)Gnmda(uS)factor}STATE{Anmda(uS)Bnmda(uS)Aampa(uS)Gampa(uS)}INITIAL{LOCALtpif(tau2/tau3>.9999){tau2=.9999*tau3}Aampa=0Gampa=0Anmda=0Bnmda=0tp=(tau2*tau3)/(tau3-tau2)*log(tau3/tau2)factor=-exp(-tp/tau2)+exp(-tp/tau3)factor=1/factormgblock(v)}BREAKPOINT{SOLVEstateMETHODcnexpGnmda=Bnmda-Anmdainmda=Gnmda*(v-e)*mgblock(v)iampa=Gampa*(v-e)i=inmda+iampa}DERIVATIVEstate{Aampa'=-Aampa/tau1Gampa'=Aampa/tau1-Gampa/tau1Anmda'=-Anmda/tau2Bnmda'=-Bnmda/tau3}NET_RECEIVE(weight(uS),F,D,tsyn(ms)){INITIAL{F=1D=1tsyn=t}F=1+(F-1)*exp(-(t-tsyn)/tauF)D=1-(1-D)*exp(-(t-tsyn)/tauD)tsyn=tAampa=Aampa+weight*exp(1)*F*D*PbAnmda=Anmda+ntar*weight*factor*F*D*PbBnmda=Bnmda+ntar*weight*factor*F*D*PbF=F+fD=D*(1-Pb*F)}FUNCTIONmgblock(v){mgblock=1/(1+exp(0.062*-(v-sh))*(mg/3.57))}