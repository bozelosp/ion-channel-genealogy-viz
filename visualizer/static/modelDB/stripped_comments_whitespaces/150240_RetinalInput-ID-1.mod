NEURON{POINT_PROCESSRetinalInputRANGEFrequency,Phase,Noise,Gamma,InterCorrelationRANGESpike,Spike10RANGELastISI,LastSpike,SpikeCountRANGESpikeTimePOINTERExpRand1,ExpRand2,ExpRand3}PARAMETER{Frequency=5(/s)Phase=0(ms)Noise=0Gamma=0InterCorrelation=0}ASSIGNED{SpikeSpike10LastISI(ms)LastSpike(ms)SpikeCountSpikeTimeExpRand1ExpRand2ExpRand3}INITIAL{Spike=0Spike10=0LastISI=0LastSpike=0SpikeCount=0CalculateSpikeTime()SpikeTime=SpikeTime+Phase}BREAKPOINT{SOLVETriggerSpike}PROCEDURECalculateSpikeTime(){LOCALiUNITSOFFif(Noise!=1){if(scop_random()<=InterCorrelation){SpikeTime=t+1e3*(1-Noise+Noise*ExpRand1)/Frequency}else{SpikeTime=t+1e3*(1-Noise+Noise*exprand(1))/Frequency}}else{SpikeTime=tif(Gamma==3&&scop_random()<=InterCorrelation){SpikeTime=SpikeTime+(1e3/(Frequency*Gamma))*(ExpRand1+ExpRand2+ExpRand3)}else{FROMi=1TOGamma{SpikeTime=SpikeTime+1e3*exprand(1)/(Frequency*Gamma)}}}UNITSON}PROCEDURETriggerSpike(){if(t>=SpikeTime){Spike=1Spike10=10LastISI=t-LastSpikeLastSpike=tSpikeCount=SpikeCount+1CalculateSpikeTime()}else{Spike=0Spike10=0}}