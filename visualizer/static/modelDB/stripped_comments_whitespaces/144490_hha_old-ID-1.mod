NEURON{SUFFIXhha_oldUSEIONnaREADenaWRITEinaUSEIONkREADekWRITEikNONSPECIFIC_CURRENTilRANGEgnabar,gkbar,gl,el,gna,gk,gmaxRANGEar2,vhalfsRANGEinf,tauRANGEtausRANGEWGLOBALtaumin}UNITS{(mA)=(milliamp)(mV)=(millivolt)FARADAY=(faraday)(coulomb)R=(k-mole)(joule/degC)}PARAMETER{a0r=0.0003(/ms)b0r=0.0003(/ms)zetar=12zetas=12gmr=0.2ar2=1.0taumin=3(ms)vvs=2(mV)vhalfr=-60(mV)W=0.016(/mV)gnabar=0(mho/cm2)gkbar=0(mho/cm2)gl=0(mho/cm2)el=-70.0(mV)v(mV)gk(mho/cm2)gna(mho/cm2)gmax(mho/cm2)celsius(degC)}STATE{mhns}ASSIGNED{ena(mV)ek(mV)ina(mA/cm2)ik(mA/cm2)il(mA/cm2)inf[4]tau[4](ms)}BREAKPOINT{SOLVEstatesMETHODcnexpgna=gnabar*m*m*h*sina=gna*(v-ena)gk=gkbar*n*nik=gk*(v-ek)il=gl*(v-el)if(gna+gk+gl>gmax){gmax=gna+gk+gl}}INITIAL{mhn(v)m=inf[0]h=inf[1]n=inf[2]s=1gna=gnabar*m*m*h*sina=gna*(v-ena)gk=gkbar*n*nik=gk*(v-ek)il=gl*(v-el)gmax=gk+gna+gl}DERIVATIVEstates{mhn(v)m'=(inf[0]-m)/tau[0]h'=(inf[1]-h)/tau[1]n'=(inf[2]-n)/tau[2]s'=(inf[3]-s)/tau[3]}FUNCTIONvarss(v(mV),i){if(i==0){varss=1/(1+exp((v+40(mV))/(-3(mV))))}elseif(i==1){varss=1/(1+exp((v+45(mV))/(3(mV))))}elseif(i==2){varss=1/(1+exp((v+42(mV))/(-2(mV))))}else{varss=alpv(v,vhalfr)}}FUNCTIONalpv(v(mV),vh(mV)){alpv=(1+ar2*exp((v-vh)/vvs))/(1+exp((v-vh)/vvs))}FUNCTIONalpr(v(mV)){alpr=exp((1.e-3)*zetar*(v-vhalfr)*FARADAY/(R*(273.16+celsius)))}FUNCTIONbetr(v(mV)){betr=exp((1.e-3)*zetar*gmr*(v-vhalfr)*FARADAY/(R*(273.16+celsius)))}FUNCTIONvartau(v(mV),i)(ms){LOCALtmpif(i==0){vartau=0.05}elseif(i==1){vartau=0.5}elseif(i==2){vartau=2.2}else{tmp=betr(v)/(a0r+b0r*alpr(v))if(tmp<taumin){tmp=taumin}vartau=tmp}}PROCEDUREmhn(v(mV)){FROMi=0TO3{tau[i]=vartau(v,i)inf[i]=varss(v,i)}}