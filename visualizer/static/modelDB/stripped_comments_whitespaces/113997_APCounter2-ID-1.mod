INDEPENDENT{tFROM0TO1WITH1(ms)}DEFINEMAXAP20000NEURON{POINT_PROCESSAPCounter2RANGEn,thresh,times,isi,rate}UNITS{(mV)=(millivolt)}PARAMETER{nthresh=0(mV)}ASSIGNED{firingtimes[MAXAP](ms)isi(ms)rate(1/s)}INITIAL{n=0firing=0isi=0rate=0check()}BREAKPOINT{SOLVEcheck}PROCEDUREcheck(){if(v>=thresh&&!firing){firing=1times[n]=tn=n+1if(n>1){isi=t-times[n-2]rate=1000/isi}}if(firing&&v<thresh){firing=0}}