INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXTC_HHUSEIONnaREADenaWRITEinaUSEIONkREADekWRITEikRANGEgna_max,gk_max,vtraub,vtraub2,i_recRANGEm_inf,h_inf,n_infRANGEtau_m,tau_h,tau_nRANGEm_exp,h_exp,n_expRANGEina,ikRANGEm,h,n}UNITS{(mA)=(milliamp)(mV)=(millivolt)(S)=(siemens)}PARAMETER{gna_max=1.0e-1(S/cm2)gk_max=1.0e-1(S/cm2)celsius(degC)dt(ms)v(mV)vtraub=-55.5vtraub2=-45.5}STATE{mhn}ASSIGNED{ina(mA/cm2)ik(mA/cm2)ena(mV)ek(mV)i_rec(mA/cm2)m_infh_infn_inftau_mtau_htau_nm_exph_expn_exptcorr}BREAKPOINT{SOLVEstatesMETHODcnexpina=gna_max*m*m*m*h*(v-ena)ik=gk_max*n*n*n*n*(v-ek)i_rec=ina+ik}DERIVATIVEstates{evaluate_fct(v)m'=(m_inf-m)/tau_mh'=(h_inf-h)/tau_hn'=(n_inf-n)/tau_n}UNITSOFFINITIAL{m=0h=0n=0tcorr=3.0^((celsius-36)/10)}PROCEDUREevaluate_fct(v(mV)){LOCALa,b,v2,v3v2=v-vtraubv3=v-vtraub2if(v2==13||v2==40||v2==15){v2=v2+0.0001}a=0.32*vtrap(v2-13,4)b=0.28*vtrap(40-v2,5)tau_m=1/(a+b)/tcorrm_inf=a/(a+b)a=0.128*exp((17-v2)/18)b=4/(1+exp((40-v2)/5))tau_h=1/(a+b)/tcorrh_inf=a/(a+b)a=0.032*vtrap(v3-15,5)b=0.5*exp((10-v3)/40)tau_n=1/(a+b)/tcorrn_inf=a/(a+b)m_exp=1-exp(-dt/tau_m)h_exp=1-exp(-dt/tau_h)n_exp=1-exp(-dt/tau_n)}FUNCTIONvtrap(x,c){if(fabs(x/c)<1e-6){vtrap=c+x/2}else{vtrap=x/(1-exp(-x/c))}}UNITSON