NEURON{SUFFIXikcUSEIONkREADekWRITEikUSEIONcaREADcaiRANGEgkbarRANGEm_inf,tau_mRANGEtauminGLOBALascale,bscale,vfctr}UNITS{(mA)=(milliamp)(mV)=(millivolt)(molar)=(1/liter)(mM)=(millimolar)}PARAMETER{v(mV)celsius(degC)ek(mV)cai(mM)gkbar=.003(mho/cm2)taumin=0.1ascale=250.0bscale=0.1vfctr=24.0}STATE{m}INITIAL{evaluate_fct(v,cai)m=m_inf}ASSIGNED{ik(mA/cm2)m_inftau_m(ms)}BREAKPOINT{SOLVEstatesMETHODcnexpik=gkbar*m*(v-ek)}DERIVATIVEstates{evaluate_fct(v,cai)m'=(m_inf-m)/tau_m}UNITSOFFPROCEDUREevaluate_fct(v(mV),cai(mM)){LOCALa,b,tadjtadj=3^((celsius-22.0)/10)a=ascale*cai*exp(v/vfctr)b=bscale*exp(-v/vfctr)tau_m=1.0/(a+b)/tadjif(tau_m<taumin){tau_m=taumin}m_inf=a/(a+b)}UNITSON