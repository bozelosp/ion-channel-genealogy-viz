NEURON{POINT_PROCESSGrCAMPAplusNMDANONSPECIFIC_CURRENTiRANGEQ10_diff,Q10_channel,fix_celsiusRANGEg_nmda,g_ampa,i_ampa,i_nmdaRANGECdur,e_nmda,e_ampaRANGEr1FIX,r2,r3,r4,r5,gmax_ampa,r1,r6,r6FIX,kBRANGERb,Ru,Rr,Ro,Rc,rb,gmax_nmda,RdRateRANGEtau_1,tau_rec,tau_facil,URANGEPRE,T,TmaxRANGETrelease,diffuseRANGETrscale}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)(pS)=(picosiemens)(nS)=(nanosiemens)(uS)=(microsiemens)(um)=(micrometer)PI=(pi)(1)}PARAMETER{Q10_diff=1.5Q10_channel=2.4gmax_ampa=1200e-6(uS)gmax_nmda=18800e-6(uS)r1FIX=5.4(/ms/mM)r2=0.82(/ms)r3=0(/ms)r4=0(/ms)r5=0.013(/ms)r6FIX=1.12(/ms/mM)e_ampa=0(mV)kB=0.44(mM)Rb=5(/ms/mM)Ru=0.1(/ms)RdRate=12e-4(/ms)Rr=9e-3(/ms)Ro=3e-2(/ms)Rc=0.966(/ms)e_nmda=-3.7(mV)mgo=1(mM)kmg=1.77(mM)deltav=22.4(mV)Cdur=0.3(ms)U=0.42(1)<0,1>tau_rec=8(ms)<1e-9,1e9>tau_facil=5(ms)<0,1e9>tau_1=1(ms)<1e-9,1e9>u0=0(1)<0,1>Tmax=1(mM)Rd=1.03(um)Diff=0.223(um2/ms)Trscale=0.83(mM)fix_celsius=37(degC)}ASSIGNED{v(mV)i(nA)g_ampa(pS)i_ampa(nA)r1(/ms)r6(/ms)T(mM)Trelease(mM)diffuse(mM)g_nmda(pS)i_nmda(nA)rb(/ms)MgBlocktsyn(ms)tr1gbar_Q10(mho/cm2)Q10(1)r_fast(/ms)r_slow(/ms)gmx_ampagmx_nmdadf11(/ms)df12(/ms)df21(/ms)df22(/ms)df23(/ms)df31(/ms)df32(/ms)df33(/ms)df41(/ms)}STATE{O_ampaD_ampaC1_nmdaC2_nmdaD_nmdaO_nmdaPRETrI1I2I3}INITIAL{O_ampa=0D_ampa=0T=0(mM)C1_nmda=0C2_nmda=0D_nmda=0O_nmda=0PRE=0Tr=0I1=0I2=0I3=0Trelease=0(mM)diffuse=0(mM)gbar_Q10=Q10_diff^((fix_celsius-30)/10)Q10=Q10_channel^((fix_celsius-30)/10)if(tau_1>=tau_rec){printf("Warningtau_rec=tau_1+1e-5}r_fast=4/(Rd*Rd/(4*Diff))r_slow=0.01/(Rd*Rd/(4*Diff))df11=-6.2*r_slow-20*r_slowdf12=20*r_slowdf21=9.09*r_slowdf22=-4.9*r_slowdf23=df22-df21df31=1.71*r_slowdf32=-0.55*r_slowdf33=df32-df31df41=0.333*r_slowgmx_ampa=gmax_ampa*gbar_Q10gmx_nmda=gmax_nmda*gbar_Q10g_ampa=0g_nmda=0}BREAKPOINT{LOCALtactdiffuse=Tr*TrscaleTrelease=T+diffusetact=Trelease*Trelease/(Trelease+kB)/(Trelease+kB)r1=r1FIX*tactr6=r6FIX*tactrb=Rb*diffuserates(v)SOLVEtransitionMETHODcnexpg_ampa=gmx_ampa*O_ampag_nmda=gmx_nmda*O_nmda*MgBlocki_ampa=g_ampa*(v-e_ampa)i_nmda=g_nmda*(v-e_nmda)i=i_ampa+i_nmda}DERIVATIVEtransition{PRE'=-r_fast*PRETr'=df11*Tr+PRE+df12*I1I1'=df21*Tr+df23*I1-df22*I2I2'=df31*I1+df33*I2-df32*I3I3'=df41*(I2-I3)O_ampa'=(r1*(1-O_ampa-D_ampa)-r2*O_ampa)*Q10D_ampa'=(-r5*D_ampa+r6*(1-O_ampa-D_ampa))*Q10C1_nmda'=(rb*(1-C1_nmda-C2_nmda-D_nmda-O_nmda)+Ru*C2_nmda-(rb+Ru)*C1_nmda)*Q10C2_nmda'=(rb*C1_nmda+Rr*D_nmda-(Ru+RdRate)*C2_nmda)*Q10D_nmda'=(RdRate*C2_nmda-Rr*D_nmda)*Q10O_nmda'=(Ro*C2_nmda-Rc*O_nmda)*Q10}PROCEDURErates(v(mV)){TABLEMgBlockDEPENDmgo,kmg,deltavFROM-120TO30WITH150MgBlock=1/(1+(mgo/kmg)*exp(-v/deltav))}NET_RECEIVE(weight,on,x,y,z,u,tsyn(ms)){LOCALefr,ef1,dtsynINITIAL{x=0y=0z=0u=u0tsyn=ttr1=1/((tau_1/tau_rec)-1)}if(flag==0){if(!on){on=1dtsyn=t-tsynefr=exp(-dtsyn/tau_rec)ef1=exp(-dtsyn/tau_1)z=z*efrz=z+y*(ef1-efr)*tr1y=y*ef1x=1-y-zif(tau_facil>0){u=u*exp(-dtsyn/tau_facil)u=u+U*(1-u)}else{u=U}y=y+x*uT=Tmax*yPRE=PRE+ytsyn=tnet_send(Cdur,1)}else{net_move(t+Cdur)}}if(flag==1){T=0on=0}}