NEURON{POINT_PROCESSampaNONSPECIFIC_CURRENTiRANGEg,a,b,gAMPAmax,tauD,tauF,util}UNITS{(uS)=(microsiemens)(nA)=(nanoamp)(mV)=(millivolt)}PARAMETER{tcon=.2(ms)tcoff=1.0(ms)eampa=0(mV)gAMPAmax=0(uS)tauD=800(ms)tauF=800(ms)util=.3}ASSIGNED{v(mV)i(nA)g(uS)factor}INITIAL{a=0b=0factor=tcon*tcoff/(tcoff-tcon)}STATE{ab}BREAKPOINT{SOLVEstatesMETHODderivimplicitg=b-ai=gAMPAmax*g*(v-eampa)}DERIVATIVEstates{a'=-a/tconb'=-b/tcoff}NET_RECEIVE(wgt,R,u,tlast(ms),nspike){LOCALxif(nspike==0){R=1u=util}else{if(tauF>0){u=util+(1-util)*u*exp(-(t-tlast)/tauF)}if(tauD>0){R=1+(R*(1-u)-1)*exp(-(t-tlast)/tauD)}}x=wgt*factor*R*ustate_discontinuity(a,a+x)state_discontinuity(b,b+x)tlast=tnspike=nspike+1}