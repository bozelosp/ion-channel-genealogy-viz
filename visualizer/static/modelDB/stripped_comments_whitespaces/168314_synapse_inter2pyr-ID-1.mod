NEURON{POINT_PROCESSinter2pyrNONSPECIFIC_CURRENTi_gabab,i_gabaaRANGEinitWRANGECdur_gabab,AlphaTmax_gabab,Beta_gabab,Erev_gabab,gbar_gabab,W_gabab,on_gabab,g_gabab,K3_gabab,K4_gabab,n_gabab,Kd_gabab,rr_gababRANGECdur_gabaa,AlphaTmax_gabaa,Beta_gabaa,Erev_gabaa,gbar_gabaa,W_gabaa,on_gabaa,g_gabaaRANGEECa,ICa,P0a,P0b,fCa,tauCa,iCatotalRANGECainf,pooldiam,zRANGElambda1,lambda2,threshold1,threshold2RANGEfmax,fmin,Wmax,Wmin,maxChange,normW,scaleWRANGEpregid,postgidRANGEF,f,tauF,D1,d1,tauD1,D2,d2,tauD2,facfactorRANGEaACH,bACH,aDA,bDA,wACH,wDA}UNITS{(mV)=(millivolt)(nA)=(nanoamp)(uS)=(microsiemens)FARADAY=96485(coul)pi=3.141592(1)}PARAMETER{initW=5Cdur_gabaa=5.31(ms)AlphaTmax_gabaa=5000(/ms)Beta_gabaa=0.18(/ms)Erev_gabaa=-75(mV)gbar_gabaa=1.7e-3(uS)Cdur_gabab=6(ms)AlphaTmax_gabab=0.09(/msmM)Beta_gabab=0.008(/ms)Erev_gabab=-75(mV)gbar_gabab=1e-3(uS)K3_gabab=.18(/ms)K4_gabab=.034(/ms)n_gabab=4Kd_gabab=100ECa=120gbar_Ca=18e-3(uS)Cainf=50e-6(mM)pooldiam=1.8172(micrometer)z=2tauCa=50(ms)P0a=.0035P0b=.0015fCa=.024lambda1=2.5lambda2=.01threshold1=0.2(uM)threshold2=0.4(uM)ACH=1LearningShutDown=1facfactor=1f=1(1)<0,1e9>tauF=1(ms)<1e-9,1e9>d1=1(1)<0,1>tauD1=1(ms)<1e-9,1e9>d2=1(1)<0,1>tauD2=1(ms)<1e-9,1e9>aACH=1bACH=0wACH=0aDA=1bDA=0wDA=0}ASSIGNED{v(mV)i_gabab(nA)g_gabab(uS)on_gababW_gababrr_gababi_gabaa(nA)g_gabaa(uS)on_gabaaW_gabaat0(ms)ICa(mA)Afactor(mM/ms/nA)iCatotal(mA)dW_gabaaWmaxWminmaxChangenormWscaleWpregidpostgidtsynfaFD1D2}STATE{r_gababs_gababr_gabaaCapoolcon}INITIAL{on_gabab=0r_gabab=0s_gabab=0W_gabab=initWon_gabaa=0r_gabaa=0W_gabaa=initWt0=-1maxChange=(Wmax-Wmin)/10dW_gabaa=0Capoolcon=CainfAfactor=1/(z*FARADAY*4/3*pi*(pooldiam/2)^3)*(1e6)tsyn=-1e30fa=0F=1D1=1D2=1}BREAKPOINT{SOLVEreleaseMETHODcnexp}DERIVATIVErelease{if(t0>0){if(t-t0<Cdur_gabab){on_gabab=1}else{on_gabab=0}if(t-t0<Cdur_gabaa){on_gabaa=1}else{on_gabaa=0}}r_gabab'=AlphaTmax_gabab*on_gabab*(1-r_gabab)-Beta_gabab*r_gababs_gabab'=K3_gabab*r_gabab-K4_gabab*s_gababr_gabaa'=AlphaTmax_gabaa*on_gabaa*(1-r_gabaa)-Beta_gabaa*r_gabaadW_gabaa=eta(Capoolcon)*(lambda1*omega(Capoolcon,threshold1,threshold2)-lambda2*W_gabaa)*dtif(fabs(dW_gabaa)>maxChange){if(dW_gabaa<0){dW_gabaa=-1*maxChange}else{dW_gabaa=maxChange}}normW=(W_gabaa-Wmin)/(Wmax-Wmin)if(dW_gabaa<0){scaleW=sqrt(fabs(normW))}else{scaleW=sqrt(fabs(1.0-normW))}W_gabaa=W_gabaa+dW_gabaa*scaleW*(1+(wACH*(ACH-1)))*LearningShutDownif(W_gabaa>Wmax){W_gabaa=Wmax}elseif(W_gabaa<Wmin){W_gabaa=Wmin}rr_gabab=s_gabab^n_gabab/(s_gabab^n_gabab+Kd_gabab)g_gabab=gbar_gabab*rr_gabab*facfactori_gabab=W_gabab*g_gabab*(v-Erev_gabab)g_gabaa=gbar_gabaa*r_gabaa*facfactori_gabaa=W_gabaa*g_gabaa*(v-Erev_gabaa)*(1+(bACH*(ACH-1)))ICa=P0b*g_gabab*(v-ECa)+P0a*gbar_Ca*VDCCm(v)*(v-ECa)Capoolcon'=-fCa*Afactor*ICa+(Cainf-Capoolcon)/tauCa}NET_RECEIVE(dummy_weight){F=1+(F-1)*exp(-(t-tsyn)/tauF)D1=1-(1-D1)*exp(-(t-tsyn)/tauD1)D2=1-(1-D2)*exp(-(t-tsyn)/tauD2)tsyn=tfacfactor=F*D1*D2F=F*fD1=D1*d1D2=D2*d2t0=t}FUNCTIONeta(Cani(mM)){LOCALtaulearn,P1,P2,P4,CaconP1=0.1P2=P1*1e-4P4=1Cacon=Cani*1e3taulearn=P1/(P2+Cacon*Cacon*Cacon)+P4eta=1/taulearn*0.001}FUNCTIONVDCCm(v(mV)){UNITSOFFVDCCm=1/(1+exp((-4-v)/6.3))UNITSON}FUNCTIONomega(Cani(mM),threshold1(uM),threshold2(uM)){LOCALr,mid,CaconCacon=Cani*1e3r=(threshold2-threshold1)/2mid=(threshold1+threshold2)/2if(Cacon<=threshold1){omega=0}elseif(Cacon>=threshold2){omega=1/(1+50*exp(-50*(Cacon-threshold2)))}else{omega=-sqrt(r*r-(Cacon-mid)*(Cacon-mid))}}