NEURON{POINT_PROCESSFastInhibSTDPRANGEtau1,tau2,e,iNONSPECIFIC_CURRENTiRANGEgmaxRANGEmgid,ggid,srcgidRANGEinterval,tlast_pre,tlast_post,M,PRANGEdeltaw,wmax,aLTP,aLTDRANGEwsynGLOBALtauLTP,tauLTD,on}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)}PARAMETER{tau1=1(ms)<1e-9,1e9>tau2=200(ms)<1e-9,1e9>gmax=.003(uS)e=-80(mV)tauLTP=20(ms)tauLTD=20(ms)wmax=1aLTP=0.001aLTD=0.00106on=1mgid=-1ggid=-1srcgid=-1}ASSIGNED{v(mV)i(nA)g(uS)factorinterval(ms)tlast_pre(ms)tlast_post(ms)MPdeltawwsyn}STATE{AB}INITIAL{LOCALtpif(tau1/tau2>.9999){tau1=.9999*tau2}A=0B=0tp=(tau1*tau2)/(tau2-tau1)*log(tau2/tau1)factor=-exp(-tp/tau1)+exp(-tp/tau2)factor=1/factorinterval=0tlast_pre=0tlast_post=0M=0P=0deltaw=0wsyn=0}BREAKPOINT{SOLVEstateMETHODcnexpg=(B-A)*gmaxi=g*(v-e)}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2}NET_RECEIVE(w){if(w>=0){P=P*exp((tlast_pre-t)/tauLTP)+aLTPinterval=tlast_post-ttlast_pre=tdeltaw=wmax*M*exp(interval/tauLTD)}else{M=M*exp((tlast_post-t)/tauLTD)-aLTDinterval=t-tlast_pretlast_post=tdeltaw=wmax*P*exp(-interval/tauLTP)}if(on){wsyn=wsyn+deltawif(wsyn>wmax){wsyn=wmax}if(wsyn<0){wsyn=0}}A=A+wsyn*factorB=B+wsyn*factor}