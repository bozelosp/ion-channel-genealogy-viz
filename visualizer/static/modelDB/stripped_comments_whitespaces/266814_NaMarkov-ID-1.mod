NEURON{SUFFIXNaMarkUSEIONnaWRITEinaRANGEgnabar,gna,ina,o1,shift,scale,hshift,dist,oinit,DISABLE,c1c2,c2c1,o1c2,c2o1,hinit,BALBI}UNITS{(mV)=(millivolt)(mA)=(milliamp)(nA)=(nanoamp)(pA)=(picoamp)(S)=(siemens)(uS)=(microsiemens)(nS)=(nanosiemens)(pS)=(picosiemens)(um)=(micron)(molar)=(1/liter)(mM)=(millimolar)}CONSTANT{}PARAMETER{v(mV)celsius(degC)ena=50(mV)gnabar=550.0e-6shift=0dist=100scale=1hshift=0oinit=-1DISABLE=1BALBI=0}ASSIGNED{ina(mA/cm2)gna(pS/um2)c1c2c2c1i1c1c1i1i2i1i1i2o1i1i1o1o1c2c2o1c2i1i1c2}STATE{c1FROM0TO1c2FROM0TO1i1FROM0TO1i2FROM0TO1o1FROM0TO1}INITIAL{rates(v)if(oinit<0){SOLVEkinSTEADYSTATEsparse}else{c1=0.5-2e-6c2=1e-6i1=0.5-oiniti2=1e-6o1=oinit}}BREAKPOINT{SOLVEkinMETHODsparsegna=gnabar*o1ina=gna*(v-ena)}KINETICkin{rates(v)~c1<->c2(c1c2,c2c1)~o1<->c2(o1c2,c2o1)~o1<->i1(o1i1,i1o1)~i1<->c1(i1c1,c1i1)~i1<->i2(i1i2,i2i1)~i1<->c2(i1c2,c2i1)CONSERVEc1+o1+c2+i1+i2=1}PROCEDURErates(v(mV)){LOCALvmvm=v+shiftif(BALBI<1+1e-6&&BALBI>1-1e-6){c1c2=scale*DoubSig(vm,0,0,0,16.0,-5.0,-10.0)c2c1=scale*DoubSig(vm,3.0,-35.0,10.0,16.0,-5.0,-10.0)c2o1=scale*DoubSig(vm,0,0,0,16.0,-10,-10.0)o1c2=scale*DoubSig(vm,3.0,-40.0,10.0,16.0,-10,-10.0)o1i1=DISABLE*scale*DoubSig(vm,3.0,-41.0+hshift,12.0,16.0,-11.0+hshift,-12.0)i1o1=DISABLE*scale*DoubSig(vm,1.0e-5,-42.0+hshift,10.0,0,0,0)i1c1=DISABLE*scale*DoubSig(vm,0.55,-65.0,7.0,0,0,0)c1i1=DISABLE*scale*DoubSig(vm,0,0,0,0.55,-65.0,-11.0)i1i2=dist*scale*DoubSig(vm,0,0,0,2.2e-3,-90.0,-5.0)i2i1=scale*DoubSig(vm,1.7e-2,-90.0,15.0,0,0,0)}else{c1c2=0.75*scale*DoubSig(vm,0,0,0,16.0,-8.0,-10.0)c2c1=0.25*scale*DoubSig(vm,2.0,-50.0,9.0,0.0,-8.0,-10.0)c2o1=1*scale*DoubSig(vm,0,0,0,14.0,0,-6.0)o1c2=1*scale*DoubSig(vm,4.0,-48.0,9.0,0,0,0)o1i1=0.5*DISABLE*scale*DoubSig(vm,1.0,-42.0+hshift,12.0,5.0,10.0+hshift,-12.0)i1o1=0i1c1=DISABLE*scale*DoubSig(vm,0.2,-65.0,10.0,0,0,0)c1i1=DISABLE*scale*DoubSig(vm,0,0,0,0.2,-65.0,-11.0)c2i1=0.3*c1i1i1c2=0i1i2=2.0*dist*DoubSig(vm,0,0,0,2.0e-2,-25.0,-5.0)i2i1=2.0*DoubSig(vm,1.8e-3,-50.0,10.0,0,0,0)}}FUNCTIONboltz(x,y,z){LOCALargarg=-(x-y)/zif(arg>50){boltz=0}else{if(arg<-50){boltz=1}else{boltz=1.0/(1.0+exp(arg))}}}FUNCTIONDoubSig(v,bh,vh,kh,bd,vd,kd){LOCALboltz1,boltz2if(bh>0){boltz1=bh*boltz(v,vh,-kh)}else{boltz1=0}if(bd>0){boltz2=bd*boltz(v,vd,-kd)}else{boltz2=0}DoubSig=boltz1+boltz2}