NEURON{POINT_PROCESSE3_NMDA_v2RANGEtau1,tau2,tau3,wtau2,wtau3,factor,e,i,scalar,v1RANGEg,B,C,E,openRANGEwfRANGEeta,gamma,mgblockNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)}PARAMETER{tau1=.1(ms)<1e-9,1e9>tau2=10(ms)<1e-9,1e9>tau3=11(ms)<1e-9,1e9>e=0(mV)factor=10wtau2=0.5Mg=1(mM)scalar=1}ASSIGNED{v(mV)i(nA)tpost(ms)g(uS)wfmgblockwtau3openv1}STATE{C(uS)B(uS)E(uS)}INITIAL{if(tau1/tau2>.9999){tau1=.9999*tau2}if(tau2/tau3>.9999){tau2=.9999*tau3}wtau3=1-wtau2C=0B=0E=0tpost=-1e9net_send(0,1)mgblock=Mgblock(v)open=0}BREAKPOINT{SOLVEstateMETHODcnexpg=wtau2*B+wtau3*E-Cmgblock=Mgblock(v)i=g*(v-e)*mgblock*scalar*0.17720458423318466open=g*scalarv1=v}DERIVATIVEstate{C'=-C/tau1B'=-B/tau2E'=-E/tau3}NET_RECEIVE(w(uS)){if(flag==0){wf=w*factorC=C+wfB=B+wfE=E+wf}}FUNCTIONMgblock(v(mV)){Mgblock=1/(1+exp(-62*v*0.001(1/mV))*Mg/3.57)}