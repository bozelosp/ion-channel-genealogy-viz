INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXicannovUSEIONcaREADcai,icaRANGEdepth,taur,erevRANGEgbar,itrpm4,concreleaseRANGEbeta,tauminPOINTERjip3pNONSPECIFIC_CURRENTitrpm4}UNITS{(mA)=(milliamp)(mV)=(millivolt)(molar)=(1/liter)(mM)=(millimolar)(um)=(micron)(msM)=(msmM)FARADAY=(faraday)(coulomb)PI=(pi)(1)}PARAMETER{v(mV)depth=0.0125(um)taur=80(ms)erev=0(mV)cai(mM)ica(mA/cm2)gbar=0.0001(mho/cm2)taumin=0.1(ms)concrelease=500Kd=87e-3(mM)}STATE{can(mM)Po}ASSIGNED{jip3p(mM/ms)ican(mA/cm2)drive_channel(mM/ms)itrpm4(mA/cm2)Po_infTau(ms)diam(um)}BREAKPOINT{SOLVEstatesMETHODderivimplicititrpm4=gbar*Po*(v-erev)}DERIVATIVEstates{evaluate_fct(v,can)Po'=(Po_inf-Po)/(Tau)drive_channel=-(concrelease)*ica/(2*FARADAY*depth)if(drive_channel<=0.0){drive_channel=0.0}can'=drive_channel+(cai-can)/(taur)}FUNCTIONMyExp(x){if(x<-50){MyExp=0}elseif(x>50){MyExp=exp(50)}else{MyExp=exp(x)}}UNITSOFFINITIAL{can=caievaluate_fct(v,can)}PROCEDUREevaluate_fct(v(mV),cai(mM)){LOCALalpha,alpha2,betaalpha=0.0057*MyExp(0.0060*-60)beta=0.033*MyExp(-0.019*-60)alpha2=alpha/(1+(Kd/cai))Po_inf=alpha2/(alpha2+beta)Tau=1/(alpha2+beta)if(Tau<taumin){Tau=taumin}}UNITSON