NEURON{POINT_PROCESSNMDAcaNONSPECIFIC_CURRENTiUSEIONcaREADecaWRITEicaRANGEg,a,b,gNMDAmax,tcon,tcoff,enmda,mgconc,eta,gammaRANGEfCa,i,ica}UNITS{(uS)=(microsiemens)(nA)=(nanoamp)(mV)=(millivolt)}PARAMETER{fCa=1.0tcon=3(ms)tcoff=150(ms)enmda=0(mV)gNMDAmax=1(uS)mgconc=1(mM)eta=0.33(/mM)gamma=0.06(/mV)}ASSIGNED{eca(mV)v(mV)i(nA)ica(nA)g(uS)factor}INITIAL{LOCALtpa=0b=0tp=(tcon*tcoff)/(tcoff-tcon)*log(tcoff/tcon)factor=-exp(-tp/tcon)+exp(-tp/tcoff)factor=1/factor}STATE{ab}BREAKPOINT{LOCALsSOLVEstatesMETHODderivimplicits=1.0/(1+eta*mgconc*exp(-gamma*v))g=b-ai=(1-fCa)*gNMDAmax*g*s*(v-enmda)ica=fCa*gNMDAmax*g*s*(v-enmda)}DERIVATIVEstates{a'=-a/tconb'=-b/tcoff}NET_RECEIVE(wgt){LOCALxx=wgt*factorstate_discontinuity(a,a+x)state_discontinuity(b,b+x)}