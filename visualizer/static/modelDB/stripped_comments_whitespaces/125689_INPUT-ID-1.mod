UNITS{(mV)=(millivolt)(mA)=(milliamp)}INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{NONSPECIFIC_CURRENTiSUFFIXINPUTGLOBALspikedurRANGESpike,lastspk,spkGLOBALseedGLOBALspkgenmodeRANGEfast_invl,slow_invl,burst_len,start,endRANGEnoiseRANGEon_times}PARAMETER{vispikedur=1.0(ms)refact=1.5(ms)spkgenmode=0fast_invl=1slow_invl=100burst_len=1start=50end=200noise=0seed=53892}ASSIGNED{Spikespklastspikepulsecntrscntrlcntrbcntrburstdton_times[10]}INITIAL{Spike=0lastspike=-9e4pulsecntr=-1burst=0scntr=fast_invlbcntr=burst_lenif(noise!=0){set_seed(seed)scntr=noise*fpoisrand(fast_invl)+(1-noise)*fast_invlbcntr=noise*fpoisrand(burst_len)+(1-noise)*burst_len}lcntr=start}BREAKPOINT{SOLVEgeneratei=Spike*(v+20)}PROCEDUREgenerate(){if(t<end){if(t>lastspike+1){spk=0}Spike=0scntr=scntr-dtlcntr=lcntr-dtif(burst){if(scntr<=dt+dt/2){if(bcntr<=1){burst=0if(spkgenmode==0){if(noise==0){lcntr=slow_invl}else{lcntr=noise*fpoisrand(slow_invl)+(1-noise)*slow_invl}}elseif(spkgenmode==1){lcntr=on_times[pulsecntr]+dt}}Spike=1spk=1lastspike=tbcntr=bcntr-1if(noise==0){scntr=fast_invl+dt}else{scntr=noise*fpoisrand(fast_invl)+(1-noise)*fast_invl}}}else{if(lcntr<=dt+dt/2){if(noise==0){bcntr=burst_len}else{bcntr=noise*fpoisrand(burst_len)+(1-noise)*burst_len}burst=1pulsecntr=pulsecntr+1}}VERBATIMreturn0;ENDVERBATIM}}FUNCTIONfgauss(x,mean,std_dev){fgauss=gauss(x,mean,std_dev)}FUNCTIONfpoisrand(mean){if(mean>700){fpoisrand=4.*poisrand(mean/4.)}else{fpoisrand=poisrand(mean)}}