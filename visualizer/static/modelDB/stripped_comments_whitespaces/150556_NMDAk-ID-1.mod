NEURON{POINT_PROCESSNMDAkRANGEtauon,tauoff,gNmax,gN,Erev,i,mgNONSPECIFIC_CURRENTiGLOBALtotal,vmin,vmax}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)(pS)=(picosiemens)(mM)=(milli/liter)}PARAMETER{Erev=0(mV)gNmax=60(pS)tauon=2.23(ms)<1e-9,1e9>tauoff=75.68(ms)<1e-9,1e9>mg=1.2(mM)vmin=-120(mV)vmax=100(mV)}ASSIGNED{v(mV)i(nA)gN(uS)factortotal(uS)}STATE{m(uS)h(uS)B}INITIAL{LOCALtprates(v)total=0if(tauon/tauoff>.9999){tauon=.9999*tauoff}m=0h=0tp=(tauon*tauoff)/(tauoff-tauon)*log(tauoff/tauon)factor=-exp(-tp/tauon)+exp(-tp/tauoff)factor=1/factor}BREAKPOINT{rates(v)SOLVEstateMETHODcnexpgN=(1e-6)*gNmax*(h-m)i=gN*B*(v-Erev)}DERIVATIVEstate{m'=-m/tauonh'=-h/tauoff}PROCEDURErates(v(mV)){TABLEBDEPENDmgFROMvminTOvmaxWITH200B=1/(1+exp(0.062(/mV)*-v)*(mg/3.57(mM)))}NET_RECEIVE(weight(uS)){state_discontinuity(m,m+weight*factor)state_discontinuity(h,h+weight*factor)total=total+weight}