NEURON{POINT_PROCESSglutamate_synNONSPECIFIC_CURRENTinmda,iampaRANGEgampamax,gnmdamax,inmda,iampaRANGEdecayampa,dampa,taudampaRANGEdecaynmda,dnmda,taudnmdaRANGEfacilampa,fampa,taufampaRANGEfacilnmda,fnmda,taufnmdaRANGEgnmda,gampaRANGEe,tau1,tau2,tau3,tau4}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(nS)=(nanomho)(mM)=(milli/liter)(mA)=(milliamp)(um)=(micron)}PARAMETER{gnmdamax=1(nS)gampamax=1(nS)e=0.0(mV)tau1=50(ms)tau2=2(ms)tau3=2(ms)tau4=0.1(ms)tau_ampa=2(ms)n=0.25(/mM)gama=0.08(/mV)dt(ms)v(mV)decayampa=.5decaynmda=.5taudampa=200(ms)taudnmda=200(ms)taufampa=200(ms)facilampa=0.0taufnmda=200(ms)facilnmda=0.0}ASSIGNED{inmda(nA)iampa(nA)gnmda(nS)gampa(nS)factor1factor2}STATE{A(nS)B(nS)C(nS)D(nS)dampadnmdafampafnmda}INITIAL{LOCALtp1,tp2gnmda=0gampa=0A=0B=0C=0D=0dampa=1dnmda=1fampa=1fnmda=1tp1=(tau2*tau1)/(tau1-tau2)*log(tau1/tau2)factor1=-exp(-tp1/tau2)+exp(-tp1/tau1)factor1=1/factor1tp2=(tau4*tau3)/(tau3-tau4)*log(tau3/tau4)factor2=-exp(-tp2/tau4)+exp(-tp2/tau3)factor2=1/factor2}BREAKPOINT{LOCALcountSOLVEstateMETHODcnexpgnmda=(A-B)/(1+n*exp(-gama*v))gampa=(C-D)inmda=(1e-3)*gnmda*(v-e)iampa=(1e-3)*gampa*(v-e)}NET_RECEIVE(weight_ampa,weight_nmda){INITIAL{gampamax=weight_ampagnmdamax=weight_nmda}gampamax=weight_ampagnmdamax=weight_nmdaA=A+factor1*gnmdamax*dnmda*fnmdaB=B+factor1*gnmdamax*dnmda*fnmdaC=C+factor2*gampamax*dampa*fampaD=D+factor2*gampamax*dampa*fampadampa=dampa*decayampadnmda=dnmda*decaynmdafampa=fampa+facilampafnmda=fnmda+facilnmda}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2C'=-C/tau3D'=-D/tau4dampa'=(1-dampa)/taudampadnmda'=(1-dnmda)/taudnmdafampa'=(1-fampa)/taufampafnmda'=(1-fnmda)/taufnmda}