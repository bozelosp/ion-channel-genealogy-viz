NEURON{POINT_PROCESSSynapticNoiseRANGEEnabledRANGEGeRev,GeMean,GeSigma,GeTau,Ge,GeDelta,GeExponential,GeAmplitude,GiRev,GiMean,GiSigma,GiTau,Gi,GiDelta,GiExponential,GiAmplitudeRANGEGeGiCorrelation,GeGiPhase,InterCorrelationPOINTERVELECTRODE_CURRENTIPOINTERInterGeNormRand,InterGiNormRand,InterGeGiNormRand}DEFINEHISTORY_LENGTH256UNITS{(mV)=(millivolt)(nS)=(nanosiemens)}PARAMETER{mydt=0.1(ms)Enabled=1GeRev=0(mV)GeMean=12(nS)GeSigma=3.0(nS)GeTau=2.7(ms)GiRev=-75(mV)GiMean=57(nS)GiSigma=6.6(nS)GiTau=10.5(ms)GeGiCorrelation=0GeGiPhase=0InterCorrelation=0}ASSIGNED{Ge(nS)GeDelta(nS)GeExponentialGeAmplitude(nS)Gi(nS)GiDelta(nS)GiExponentialGiAmplitude(nS)V(mV)I(nA)InterGeNormRandInterGiNormRandInterGeGiNormRandGeGiNormRandHistoryA[HISTORY_LENGTH]GeGiNormRandHistoryB[HISTORY_LENGTH]}INITIAL{LOCALiGe=0Gi=0I=0FROMi=0TOHISTORY_LENGTH-1{GeGiNormRandHistoryA[i]=0GeGiNormRandHistoryB[i]=0}UpdateParameters()}PROCEDUREUpdateParameters(){GeDelta=0GiDelta=0if(GeTau!=0){GeExponential=exp(-dt/GeTau)GeAmplitude=GeSigma*sqrt((1-exp(-2*dt/GeTau)))}if(GiTau!=0){GiExponential=exp(-dt/GiTau)GiAmplitude=GiSigma*sqrt((1-exp(-2*dt/GiTau)))}}PROCEDUREShiftGeGiNormRandHistoryA(GeGiNormRand){LOCALHistoryLengthHistoryLength=HISTORY_LENGTHVERBATIMunsignedinti;for(i=(unsignedint)_lHistoryLength-1;i>=1;i--){GeGiNormRandHistoryA[i]=GeGiNormRandHistoryA[i-1];}GeGiNormRandHistoryA[0]=_lGeGiNormRand;ENDVERBATIM}PROCEDUREShiftGeGiNormRandHistoryB(GeGiNormRand){LOCALHistoryLengthHistoryLength=HISTORY_LENGTHVERBATIMunsignedinti;for(i=(unsignedint)_lHistoryLength-1;i>=1;i--){GeGiNormRandHistoryB[i]=GeGiNormRandHistoryB[i-1];}GeGiNormRandHistoryB[0]=_lGeGiNormRand;ENDVERBATIM}BREAKPOINT{LOCALGeNormRand,GiNormRand,GeGiNormRand,GePhase,GiPhaseGeNormRand=sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGeNormRandGiNormRand=sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGiNormRandShiftGeGiNormRandHistoryA(sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGeGiNormRand)if(GeGiPhase==0){GePhase=0GiPhase=0}elseif(GeGiPhase>0){GePhase=0GiPhase=floor(GeGiPhase/mydt)}else{GePhase=floor(-GeGiPhase/mydt)GiPhase=0}if(Enabled==1){SOLVEOUProcessif(GeTau==0){GeDelta=GeSigma*(sqrt(1-GeGiCorrelation)*GeNormRand+sqrt(GeGiCorrelation)*GeGiNormRandHistoryA[GePhase])}if(GiTau==0){GiDelta=GiSigma*(sqrt(1-GeGiCorrelation)*GiNormRand+sqrt(GeGiCorrelation)*GeGiNormRandHistoryA[GiPhase])}Ge=GeMean+GeDeltaGi=GiMean+GiDeltaif(Ge<0){Ge=0}if(Gi<0){Gi=0}UNITSOFFI=(Ge*(GeRev-V)+Gi*(GiRev-V))*1e-3UNITSON}else{Ge=0Gi=0I=0}}PROCEDUREOUProcess(){LOCALGeNormRand,GiNormRand,GeGiNormRand,GePhase,GiPhaseGeNormRand=sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGeNormRandGiNormRand=sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGiNormRandShiftGeGiNormRandHistoryB(sqrt(1-InterCorrelation)*normrand(0,1)+sqrt(InterCorrelation)*InterGeGiNormRand)if(GeGiPhase==0){GePhase=0GiPhase=0}elseif(GeGiPhase>0){GePhase=0GiPhase=floor(GeGiPhase/mydt)}else{GePhase=floor(-GeGiPhase/mydt)GiPhase=0}if(GeTau!=0){GeDelta=GeExponential*GeDelta+GeAmplitude*(sqrt(1-GeGiCorrelation)*GeNormRand+sqrt(GeGiCorrelation)*GeGiNormRandHistoryB[GePhase])}if(GiTau!=0){GiDelta=GiExponential*GiDelta+GiAmplitude*(sqrt(1-GeGiCorrelation)*GiNormRand+sqrt(GeGiCorrelation)*GeGiNormRandHistoryB[GiPhase])}}