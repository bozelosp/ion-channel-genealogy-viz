UNITS{(molar)=(1/liter)(pA)=(picoamp)(mV)=(millivolt)(uS)=(micromho)(mA)=(milliamp)(mM)=(millimolar)}INDEPENDENT{vFROM-100TO50WITH50(mV)}NEURON{SUFFIXmypumpUSEIONnaWRITEinaUSEIONkWRITEikRANGEinapump,ipumpmax,n,km,kk,k,ina,ik,decline,initialdensity,lex,red,lux,green}PARAMETER{dt(ms)nai(mM)ipumpmax=0.01(mA/cm2)km=10.0(mM)n=1.5kk=10.0(mM)k=1.5nainit=4(mM)celsius=35(degC)T=1decline=0initialdensity=0.00208768267(mA/cm2)lex=100000(ms)lux=100000(ms)red=3000(ms)green=8500(ms)}ASSIGNED{ina(mA/cm2)iNa(mA/cm2)ik(mA/cm2)inapump(mA/cm2)inapumping(mA/cm2)xmt_wait(ms)t_date(ms)ipumplux(mA/cm2)}INITIAL{ipumpmax=initialdensityt_wait=0}BREAKPOINT{if(decline==1){if(t>red){if(t_wait<lex){t_wait=t_wait+dt}else{ipumpmax=ipumpmax-0.001t_wait=0}}if(ipumpmax<0){ipumpmax=0}}ina=3.0*ipumpmaxik=-2.0*ipumpmax}