NEURON{POINT_PROCESSAMPARANGER,gmax,g,ina,Alpha,Beta,iAMPAUSEIONnaWRITEinaNONSPECIFIC_CURRENTiAMPAGLOBALCdur,Erev,Rinf,Rtau}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)(mM)=(milli/liter)}PARAMETER{Cmax=0.1(mM)Cdur=1.1(ms)Alpha=1(/ms)Beta=0.5(/ms)Erev=0(mV)gmax=1(uS)}ASSIGNED{v(mV)iAMPA(nA)g(uS)RinfRtau(ms)synoninaica}STATE{RonRoff}INITIAL{Rinf=Cmax*Alpha/(Cmax*Alpha+Beta)Rtau=1/((Alpha*Cmax)+Beta)synon=0}BREAKPOINT{SOLVEreleaseMETHODcnexpg=(Ron+Roff)*gmaxiAMPA=g*(v-Erev)ina=0.9*iAMPAiAMPA=0.1*iAMPA}DERIVATIVErelease{Ron'=(synon*Rinf-Ron)/RtauRoff'=-Beta*Roff}NET_RECEIVE(weight,on,nspike,r0,t0(ms)){if(flag==0){nspike=nspike+1if(!on){r0=r0*exp(-Beta*(t-t0))t0=ton=1synon=synon+weightstate_discontinuity(Ron,Ron+r0)state_discontinuity(Roff,Roff-r0)}net_send(Cdur,nspike)}if(flag==nspike){r0=weight*Rinf+(r0-weight*Rinf)*exp(-(t-t0)/Rtau)t0=tsynon=synon-weightstate_discontinuity(Ron,Ron-r0)state_discontinuity(Roff,Roff+r0)on=0}}