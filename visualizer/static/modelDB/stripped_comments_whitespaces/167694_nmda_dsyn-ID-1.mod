NEURON{POINT_PROCESSNMDA_dsynRANGEgmaxNONSPECIFIC_CURRENTiRANGEtau1,tau2,factorRANGEg,mgBRANGEt_lastGLOBALDeadtime,PrethreshGLOBALvmin,vmax}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(nS)=(nanosiemens)}PARAMETER{gmax=1.5(nS)tau1=75(ms)tau2=2(ms)Prethresh=0(mV)Deadtime=0(ms)vmin=-120(mV)vmax=100(mV)}ASSIGNED{i(nA)g(nS)v(mV)factortp(ms)t_last(ms)}STATE{ABmgB}INITIAL{i=0A=0B=0t_last=-1-Deadtimetp=(tau2*tau1)/(tau1-tau2)*log(tau1/tau2)factor=-exp(-tp/tau2)+exp(-tp/tau1)factor=1/factormgblock(v)}BREAKPOINT{mgblock(v)SOLVEstateMETHODcnexpg=gmax*mgB*(A-B)i=(1e-3)*g*v}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2}PROCEDUREmgblock(v(mV)){TABLEmgBFROMvminTOvmaxWITH400mgB=1/(1+0.3*exp(-0.1(/mV)*(v)))}NET_RECEIVE(trgr){if(t_last+Deadtime<=t){t_last=tA=A+trgr*factorB=B+trgr*factor}}