NEURON{POINT_PROCESSExpAMPARRANGEe,i,tau1,tau2,g,mgNONSPECIFIC_CURRENTi,iampaGLOBALtotal}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)(mM)=(milli/liter)}PARAMETER{tau1=0.5(ms)tau2=1.5(ms)e=0.0(mV)mg=1(mM)sh=0(mV)}ASSIGNED{v(mV)i(nA)g(uS)iampa(nA)factortotal(uS)}STATE{Aampa(uS)Gampa(uS)}INITIAL{LOCALtptotal=0if(tau1/tau2>.9999){tau1=.9999*tau2}Aampa=0Gampa=0tp=(tau1*tau2)/(tau2-tau1)*log(tau2/tau1)factor=-exp(-tp/tau1)+exp(-tp/tau2)factor=1/factor}BREAKPOINT{SOLVEstateMETHODcnexpg=Gampa-Aampaiampa=g*(v-e)i=iampa}DERIVATIVEstate{Aampa'=-Aampa/tau1Gampa'=-Gampa/tau2}NET_RECEIVE(weight(uS)){state_discontinuity(Aampa,Aampa+weight*factor)state_discontinuity(Gampa,Gampa+weight*factor)total=total+weight}