NEURON{ARTIFICIAL_CELLIntFire1RANGEtau,refrac,m}PARAMETER{tau=10(ms)refrac=5(ms)}ASSIGNED{mt0(ms)refractory}INITIAL{m=0t0=trefractory=0}FUNCTIONM(){if(refractory==0){M=m*exp(-(t-t0)/tau)}elseif(refractory==1){if(t-t0<.5){M=2}else{M=-1}}}NET_RECEIVE(w){if(refractory==0){m=m*exp(-(t-t0)/tau)t0=tm=m+wif(m>1){refractory=1m=2net_send(refrac,refractory)net_event(t)}}elseif(flag==1){t0=trefractory=0m=0}}