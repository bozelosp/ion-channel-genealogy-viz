NEURON{POINT_PROCESSInNpNONSPECIFIC_CURRENTiRANGEdelay,dur,perRANGEmean,stdevRANGEgenevent,y1THREADSAFEPOINTERdonotuse}UNITS{(nA)=(nanoamp)(mA)=(milliamp)}PARAMETER{delay(ms)dur(ms)<0,1e9>per=0.1(ms)<1e-9,1e9>mean=0(nA)stdev=1(nA)genevent=0(1)}ASSIGNED{onival(nA)i(nA)donotuset0(ms)y0(nA)y1(nA)}INITIAL{on=0ival=0i=0net_send(delay,1)}PROCEDUREseed(x){set_seed(x)}BEFOREBREAKPOINT{if(on==0){i=0}else{i=y0+((t-t0)/per)*(y1-y0)}}BREAKPOINT{}FUNCTIONyval()(nA){yval=mean+nrand()*stdev}NET_RECEIVE(w){if(dur>0){if(flag==1){if(on==0){on=1net_send(dur,1)net_send(per,2)t0=ty0=yval()y1=yval()if(genevent==1){net_event(t)}}else{if(on==1){on=0y0=0y1=0}}}if(flag==2){if(on==1){net_send(per,2)t0=ty0=y1y1=yval()if(genevent==1){net_event(t)}}}}}VERBATIM#ifndefNRN_VERSION_GTEQ_8_2_0doublenrn_random_pick(void*r);void*nrn_random_arg(intargpos);#defineRANDCAST#else#defineRANDCAST(Rand*)#endifENDVERBATIMFUNCTIONnrand(){VERBATIMif(_p_donotuse){_lnrand=nrn_random_pick(RANDCAST_p_donotuse);}else{if(_nt!=nrn_threads){hoc_execerror("multithreadrandominInUnif","onlyviahocRandom");}ENDVERBATIMnrand=normrand(0,stdev/(1(nA)))VERBATIM}ENDVERBATIM}PROCEDUREnoiseFromRandom(){VERBATIM{void**pv=(void**)(&_p_donotuse);if(ifarg(1)){*pv=nrn_random_arg(1);}else{*pv=(void*)0;}}ENDVERBATIM}