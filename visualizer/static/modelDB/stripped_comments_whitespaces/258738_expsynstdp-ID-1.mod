NEURON{POINT_PROCESSExpSynSTDPRANGEtau,e,i,d,p,dtau,ptauNONSPECIFIC_CURRENTiGLOBALverbose}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)}PARAMETER{tau=0.1(ms)<1e-9,1e9>e=0(mV)d=0<0,1>p=0dtau=34(ms)ptau=17(ms)verbose=0}ASSIGNED{v(mV)i(nA)tpost(ms)}STATE{g(uS)}INITIAL{g=0tpost=-1e9net_send(0,1)}BREAKPOINT{SOLVEstateMETHODcnexpi=g*(v-e)}DERIVATIVEstate{g'=-g/tau}NET_RECEIVE(w(uS),A,tpre(ms)){INITIAL{A=0tpre=-1e9}if(flag==0){if(verbose){printf("entryflag=%gt=%gw=%gA=%gtpre=%gtpost=%g\n",flag,t,w,A,tpre,tpost)}g=g+w*(1+A)tpre=tA=A*(1-d*exp((tpost-t)/dtau))}elseif(flag==2){if(verbose){printf("entryflag=%gt=%gtpost=%g\n",flag,t,tpost)}tpost=tFOR_NETCONS(w1,A1,tp){if(verbose){printf("entryFOR_NETCONSw1=%gA1=%gtp=%g\n",w1,A1,tp)}A1=A1+p*exp((tp-t)/ptau)}}else{if(verbose){printf("entryflag=%gt=%g\n",flag,t)}WATCH(v>-20)2}}