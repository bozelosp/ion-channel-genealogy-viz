NEURON{ARTIFICIAL_CELLNetStimBoxRANGEstart,forcestop,status,nspkTHREADSAFEPOINTERdonotuse}PARAMETER{start=50(ms)forcestop=200(ms)status=0nspk=1}ASSIGNED{event(ms)onispikedonotuse}INITIAL{on=0}FUNCTIONinvl(mean(ms))(ms){}VERBATIM#ifndefNRN_VERSION_GTEQ_8_2_0doublenrn_random_pick(void*r);void*nrn_random_arg(intargpos);#defineRANDCAST#else#defineRANDCAST(Rand*)#endifENDVERBATIMFUNCTIONerand(){VERBATIMif(_p_donotuse){_lerand=nrn_random_pick(RANDCAST_p_donotuse);}else{if(_nt!=nrn_threads){hoc_execerror("multithreadrandominNetStim","onlyviahocRandom");}ENDVERBATIMerand=exprand(1)VERBATIM}ENDVERBATIM}PROCEDUREnoiseFromRandom(){VERBATIM{void**pv=(void**)(&_p_donotuse);if(ifarg(1)){*pv=nrn_random_arg(1);}else{*pv=(void*)0;}}ENDVERBATIM}NET_RECEIVE(w){if(status==1){FROMi=1TOnspk{event=erand()*(forcestop-start)+startif(event<0){event=0}printf("NetStimBoxnet_event(event)}status=0}}