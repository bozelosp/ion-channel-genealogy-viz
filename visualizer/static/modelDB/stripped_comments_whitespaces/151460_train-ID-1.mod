NEURON{POINT_PROCESStrainIClampRANGEdel,PW,train,amp,freq,i,conv,pulsecount,onoffELECTRODE_CURRENTi}UNITS{(na)=(nanoamp)}PARAMETER{del(ms)PW(ms)train(ms)amp(na)freq(1/s)conv=1000(ms/s)pulsecount(s/s)onoff(s/s)}ASSIGNED{i(na)}INITIAL{LOCALj,kpulsecount=0onoff=0k=(train/conv)*freqi=0FROMj=0TOk{at_time(del+(j*(conv/freq)))at_time(del+PW+(j*(conv/freq)))}at_time(del+train)}BREAKPOINT{if(t<del+train&&t>del){if(t>del+(pulsecount*(conv/freq))&&t<del+(pulsecount*(conv/freq))+PW){i=amponoff=1}else{if(onoff==0){i=0}else{i=0pulsecount=pulsecount+1onoff=0}}}else{i=0pulsecount=0onoff=0}}