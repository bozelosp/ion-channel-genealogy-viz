NEURON{SUFFIXNapIsNONSPECIFIC_CURRENTinapRANGEgnapbar,ena,gnapRANGEmp_infRANGEtau_mpRANGEampB,bmpB,shiftT}UNITS{(mA)=(milliamp)(mV)=(millivolt)}PARAMETER{gnapbar=3.2971e-5(mho/cm2)ena=50.0(mV)celsius=20(degC)vtraub1=10(mV)ampA=0.01ampB=38.4ampC=5bmpA=0.00025bmpB=42.7bmpC=5shiftT=0(degC)}STATE{mp}ASSIGNED{dt(ms)v(mV)inap(mA/cm2)gnap(mho/cm2)mp_inftau_mp(ms)tadj1}BREAKPOINT{SOLVEstatesMETHODcnexpgnap=gnapbar*mp*mp*mpinap=gnapbar*mp*mp*mp*(v-ena)}DERIVATIVEstates{evaluate_fct(v)mp'=(mp_inf-mp)/tau_mp}UNITSOFFINITIAL{tadj1=3.0^((celsius-36-shiftT)/10)evaluate_fct(v)mp=mp_inf}PROCEDUREevaluate_fct(v(mV)){LOCALa,b,v1v1=v-vtraub1a=vtrap1(v1)b=vtrap2(v1)tau_mp=(1*tadj1)/(a+b)mp_inf=a/(a+b)}FUNCTIONvtrap1(x){if(fabs((x+ampB)/ampC)<1e-6){vtrap1=ampA*ampC}else{vtrap1=(ampA*(x+ampB))/(1-exp(-(x+ampB)/ampC))}}FUNCTIONvtrap2(x){if(fabs((x+bmpB)/bmpC)<1e-6){vtrap2=-bmpA*bmpC}else{vtrap2=(bmpA*(-(x+bmpB)))/(1-exp((x+bmpB)/bmpC))}}UNITSON