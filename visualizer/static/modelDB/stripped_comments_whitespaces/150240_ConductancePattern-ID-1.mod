NEURON{POINT_PROCESSConductancePatternRANGEBaseDelay,DelayExpMean,DelayExpNoise,DelayGaussMean,DelayGaussStd,DelayGaussNoise,Weight,Tau,ERev,Threshold,DeadTime,ExpireTimePOINTERV,TriggerRANGEGELECTRODE_CURRENTI}DEFINEMAX_INPUTS1024UNITS{(nA)=(nanoampere)(mV)=(millivolt)(nS)=(nanosiemens)}PARAMETER{mydt=0.1(ms)BaseDelay=0(ms)DelayExpMean=0(ms)DelayExpNoise=0DelayGaussMean=0(ms)DelayGaussStd=1(ms)DelayGaussNoise=0Weight=10(nS)Tau=1(ms)ERev=0(mV)Threshold=0DeadTime=1(ms)ExpireTime=10(ms)}ASSIGNED{V(mV)TriggerG(nS)I(nA)LastTime(ms)InputTimes[MAX_INPUTS](ms)InputAmplitudes[MAX_INPUTS]}INITIAL{LOCALiG=0I=0LastTime=-(DeadTime+mydt)UpdateParameters()}BREAKPOINT{SOLVEProcessInputs}PROCEDUREUpdateParameters(){FROMi=0TOMAX_INPUTS-1{InputTimes[i]=ExpireTimeInputAmplitudes[i]=0}}PROCEDUREDetectInput(){LOCALAmplitude,i,jAmplitude=0if(t-LastTime>DeadTime){if(Trigger>Threshold){Amplitude=1LastTime=t}}if(Amplitude>0){i=0j=0while(i<MAX_INPUTS&&j==0){if(InputTimes[i]>=ExpireTime){InputTimes[i]=-(BaseDelay+DelayExpMean*(1-DelayExpNoise+DelayExpNoise*exprand(1)))if(DelayGaussNoise==1){InputTimes[i]=InputTimes[i]-normrand(DelayGaussMean,DelayGaussStd)}InputAmplitudes[i]=Amplitudej=1}else{i=i+1}}if(j==0){printf("Detectedinputcouldn'tbeadded!\n")}}}FUNCTIONTraverseInputs()(nS){LOCALi,jTraverseInputs=0FROMi=0TOMAX_INPUTS-1{if(InputTimes[i]<ExpireTime){if(InputTimes[i]>=0){TraverseInputs=TraverseInputs+Weight*InputAmplitudes[i]*(InputTimes[i]/Tau)*exp(-(InputTimes[i]-Tau)/Tau)}InputTimes[i]=InputTimes[i]+mydt}}}PROCEDUREProcessInputs(){DetectInput()G=TraverseInputs()UNITSOFFI=G*(ERev-V)*1e-3UNITSON}