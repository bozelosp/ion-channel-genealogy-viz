NEURON{POINT_PROCESSComboSynUSEIONcaWRITEicaUSEIONmgREADmgoVALENCE2RANGEtau1,tau2,e_AMPA,i_AMPARANGEg_AMPARANGEtau_rise,tau_decayRANGEi_NMDA,g_NMDA,e_NMDA,mg,i2,ica,ca_ratioRANGErrNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(molar)=(1/liter)(mM)=(millimolar)}PARAMETER{tau1=0.1(ms)<1e-9,1e9>tau2=5(ms)<1e-9,1e9>e_AMPA=0(mV)tau_rise=5.0(ms)<1e-9,1e9>tau_decay=70.0(ms)<1e-9,1e9>e_NMDA=0.0(mV)mgo=1.0(mM)ca_ratio=0.1(1)rr=0.839486356}ASSIGNED{v(mV)i(nA)i2(nA)g_AMPA(umho)g_NMDA(umho)factor(1)ica(nA)i_NMDA(nA)i_AMPA(nA)factor_AMPAfactor_NMDA}STATE{A_AMPA(uS)B_AMPA(uS)A_NMDA(uS)B_NMDA(uS)}INITIAL{LOCALtp_NMDA,tp_AMPAif(tau_rise/tau_decay>.9999){tau_rise=.9999*tau_decay}A_NMDA=0B_NMDA=0tp_NMDA=(tau_rise*tau_decay)/(tau_decay-tau_rise)*log(tau_decay/tau_rise)factor_NMDA=-exp(-tp_NMDA/tau_rise)+exp(-tp_NMDA/tau_decay)factor_NMDA=1/factor_NMDAif(tau1/tau2>.9999){tau1=.9999*tau2}A_AMPA=0B_AMPA=0tp_AMPA=(tau1*tau2)/(tau2-tau1)*log(tau2/tau1)factor_AMPA=-exp(-tp_AMPA/tau1)+exp(-tp_AMPA/tau2)factor_AMPA=1/factor_AMPA}BREAKPOINT{SOLVEstateMETHODcnexpg_NMDA=B_NMDA-A_NMDAi2=g_NMDA*mgblock(v)*(v-e_NMDA)ica=ca_ratio*i2i_NMDA=(1-ca_ratio)*i2g_AMPA=B_AMPA-A_AMPAi_AMPA=g_AMPA*(v-e_AMPA)i=i_NMDA+i_AMPA}DERIVATIVEstate{A_NMDA'=-A_NMDA/tau_riseB_NMDA'=-B_NMDA/tau_decayA_AMPA'=-A_AMPA/tau1B_AMPA'=-B_AMPA/tau2}FUNCTIONmgblock(v(mV)){mgblock=1/(1+exp(0.062(/mV)*-v)*(mgo/3.57(mM)))}NET_RECEIVE(weight(uS)){A_NMDA=A_NMDA+weight*rr*factor_NMDAB_NMDA=B_NMDA+weight*rr*factor_NMDAA_AMPA=A_AMPA+weight*(1-rr)*factor_AMPAB_AMPA=B_AMPA+weight*(1-rr)*factor_AMPA}