INDEPENDENT{tFROM0TO1WITH1(ms)}DEFINENSTEP3NEURON{POINT_PROCESSTVClampELECTRODE_CURRENTiRANGEdur,amp,rs,vc,i}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(micromho)}PARAMETER{v(mV)rs=3(megohm)}ASSIGNED{i(nA)vc(mV)ic(nA)tc2(ms)tc3(ms)dur[NSTEP](ms)amp[NSTEP](mV)on}INITIAL{tc2=dur[0]+dur[1]tc3=tc2+dur[2]on=0}BREAKPOINT{SOLVEvstimif(on){i=(vc-v)/(0.1*rs)i=i*10}else{i=0}}PROCEDUREvstim(){on=1if(t<dur[0]){vc=amp[0]}elseif(t<tc2){vc=((amp[1]-amp[0])/dur[1])*(t-dur[0])+amp[0]}elseif(t<tc3){vc=((amp[2]-amp[1])/dur[2])*(t-tc2)+amp[1]}else{vc=amp[2]on=0}if(on){}else{ic=0}VERBATIMreturn0;ENDVERBATIM}