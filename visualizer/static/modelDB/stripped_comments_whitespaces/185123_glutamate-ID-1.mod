NEURON{POINT_PROCESSglutamate_oldNONSPECIFIC_CURRENTinmda,iampaRANGEdel,Tspike,NspikeRANGEe,local_v,inmda,iampaRANGEdecayampa,decaynmda,dampa,dnmdaRANGEgnmda,gampaRANGElocx,locy,dend,posGLOBALn,gama,tau_ampa,taudampa,taudnmdaGLOBALgampamax,gnmdamax,tau1,tau2USEIONcaWRITEicaGLOBALicaconstGLOBALVoff,Vset}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(nS)=(nanomho)(mM)=(milli/liter)F=96480(coul)R=8.314(volt-coul/degC)PI=(pi)(1)(mA)=(milliamp)(um)=(micron)}PARAMETER{icaconst=0.1gnmdamax=1(nS)gampamax=1(nS)e=0.0(mV)tau1=50(ms)tau2=2(ms)tau_ampa=1(ms)n=0.25(/mM)gama=0.08(/mV)dt(ms)v(mV)del=30(ms)Tspike=10(ms)Nspike=1decayampa=1decaynmda=1taudampa=200(ms)taudnmda=200(ms)dend=0pos=0Voff=0Vset=-60}ASSIGNED{inmda(nA)iampa(nA)gnmda(nS)local_v(mV)ica(nA)}STATE{A(nS)B(nS)gampa(nS)dampadnmda}INITIAL{gnmda=0gampa=0A=0B=0dampa=1dnmda=1}BREAKPOINT{LOCALcountSOLVEstateMETHODcnexpFROMcount=0TONspike-1{IF(at_time(count*Tspike+del)){state_discontinuity(A,A+gnmdamax*(dnmda))state_discontinuity(B,B+gnmdamax*(dnmda))state_discontinuity(gampa,gampa+gampamax*dampa)state_discontinuity(dampa,dampa*decayampa)state_discontinuity(dnmda,dnmda*decaynmda)}}local_v=v*(1-Voff)+Vset*Voffgnmda=(A-B)/(1+n*exp(-gama*local_v))inmda=(1e-3)*gnmda*(v-e)iampa=(1e-3)*gampa*(v-e)local_v=vica=inmda*0.1/(PI*diam)*icaconstinmda=inmda*.9}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2gampa'=-gampa/tau_ampadampa'=(1-dampa)/taudampadnmda'=(1-dnmda)/taudnmda}