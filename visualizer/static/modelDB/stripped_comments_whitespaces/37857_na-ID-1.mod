UNITS{(mA)=(milliamp)(mV)=(millivolt)(nA)=(nanoamp)}NEURON{SUFFIXnaUSEIONnaREADenaWRITEinaRANGEgnabar,gna,inaGLOBALhinf,minf,htau,mtau}INDEPENDENT{tFROM0TO1WITH1(ms)}PARAMETER{v(mV)celsius=22(degC)dt(ms)ena(mV)gnabar=0.07958(mho/cm2)<0,1e9>}STATE{mh}ASSIGNED{ina(mA/cm2)gna(mho/cm2)minfhinfmtau(ms)htau(ms)}LOCALmexp,hexpBREAKPOINT{SOLVEstatesgna=gnabar*(m^3)*hina=gna*(v-ena)}UNITSOFFINITIAL{trates(v)m=minfh=hinf}PROCEDUREstates(){trates(v)m=m+mexp*(minf-m)h=h+hexp*(hinf-h)VERBATIMreturn0;ENDVERBATIM}LOCALq10PROCEDURErates(v){q10=3^((celsius-22)/10)minf=1/(1+exp(-(v+38)/7))hinf=1/(1+exp((v+65)/6))mtau=(10/(5*exp((v+60)/18)+36*exp(-(v+60)/25)))+0.04htau=(100/(7*exp((v+60)/11)+10*exp(-(v+60)/25)))+0.6}PROCEDUREtrates(v){LOCALtincTABLEminf,mexp,hinf,hexpDEPENDdt,celsiusFROM-150TO150WITH300rates(v)tinc=-dt*q10mexp=1-exp(tinc/mtau)hexp=1-exp(tinc/htau)}FUNCTIONvtrap(x,y){if(fabs(x/y)<1e-6){vtrap=y*(1-x/y/2)}else{vtrap=x/(exp(x/y)-1)}}UNITSON