NEURON{POINT_PROCESSbg2pyrNONSPECIFIC_CURRENTinmdaNONSPECIFIC_CURRENTiampaRANGEtaun1,taun2,factorn,normconstnRANGEtaua1,taua2,factora,normconstaRANGEgnmda,gnmdas,gNMDAmax,enmdaRANGEgampa,gampas,gAMPAmax,eampaRANGEinitW}UNITS{(mV)=(millivolt)(nA)=(nanoamp)(uS)=(microsiemens)}PARAMETER{initW=6.3taun1=5(ms)taun2=125(ms)gNMDAmax=0.5e-3(uS)enmda=0(mV)taua1=.5(ms)taua2=7(ms)gAMPAmax=1e-3(uS)eampa=0(mV)}ASSIGNED{v(mV)eca(mV)inmda(nA)gnmdagnmdasfactornnormconstniampa(nA)gampagampasfactoranormconsta}STATE{AnBnAaBa}INITIAL{An=0Bn=0factorn=taun1*taun2/(taun2-taun1)normconstn=-1/(factorn*(1/exp(log(taun2/taun1)/(taun1*(1/taun1-1/taun2)))-1/exp(log(taun2/taun1)/(taun2*(1/taun1-1/taun2)))))Aa=0Ba=0factora=taua1*taua2/(taua2-taua1)normconsta=-1/(factora*(1/exp(log(taua2/taua1)/(taua1*(1/taua1-1/taua2)))-1/exp(log(taua2/taua1)/(taua2*(1/taua1-1/taua2)))))}BREAKPOINT{SOLVEstatesMETHODcnexpgnmda=normconstn*factorn*(Bn-An)gnmdas=gnmdaif(gnmdas>1){gnmdas=1}inmda=initW*gNMDAmax*gnmdas*(v-enmda)*sfunc(v)gampa=normconsta*factora*(Ba-Aa)gampas=gampaif(gampas>1){gampas=1}iampa=initW*gAMPAmax*gampas*(v-eampa)}DERIVATIVEstates{An'=-An/taun1Bn'=-Bn/taun2Aa'=-Aa/taua1Ba'=-Ba/taua2}NET_RECEIVE(wgt){LOCALxx=wgtstate_discontinuity(An,An+x)state_discontinuity(Bn,Bn+x)state_discontinuity(Aa,Aa+x)state_discontinuity(Ba,Ba+x)}FUNCTIONsfunc(v(mV)){UNITSOFFsfunc=1/(1+0.33*exp(-0.06*v))UNITSON}