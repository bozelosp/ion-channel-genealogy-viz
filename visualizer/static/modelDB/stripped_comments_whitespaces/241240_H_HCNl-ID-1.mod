NEURON{SUFFIXH_HCNlNONSPECIFIC_CURRENTiRANGEgbar,g,ehGLOBALinf_n,tau_n,inf_ns,tau_ns}PARAMETER{eh=-32(mV)gbar=30(pS/um2)gates_n=2vhalf_n=-98(mV)slope_n=9(mV)needAdj=1vhalfA_n=0(mV)slopeA_n=0(mV)v5_adj=0(mV)slp_adj=0(mV)gates_ns=1vhalf_ns=-98(mV)slope_ns=9(mV)tauA_n=107(ms)tauDv_n=0(mV)tauG_n=0.37tauF_n=0tau0_n=14.7(ms)tauA_ns=367(ms)tauDv_ns=0(mV)tauG_ns=0.3975tauF_ns=0tau0_ns=161.3(ms)}STATE{nns}ASSIGNED{v(mV)celsius(degC)ik(mA/cm2)g(pS/um2)i(mA/cm2)inf_ntau_n(ms)inf_nstau_ns(ms)}BREAKPOINT{SOLVEstatesMETHODcnexpg=0if(n>=0){g=gbar*(0.434*n^gates_n+(1-0.434)*ns^gates_ns)}i=g*(v-eh)*(1e-4)}INITIAL{needAdj=1rates(v)n=inf_nns=inf_ns}UNITS{(mA)=(milliamp)(mV)=(millivolt)(pS)=(picosiemens)(um)=(micrometer)}DERIVATIVEstates{rates(v)n'=(inf_n-n)/tau_nns'=(inf_ns-ns)/tau_ns}PROCEDURErates(v(mV)){if(needAdj>0){needAdj=0ngate_adjust(gates_n,vhalf_n,slope_n)vhalfA_n=v5_adjslopeA_n=slp_adj}inf_n=Boltzmann(v,vhalfA_n,slopeA_n)tau_n=BorgMod_tau(v,vhalfA_n,slopeA_n,tau0_n,tauA_n,tauG_n,tauF_n,tauDv_n)inf_ns=Boltzmann(v,vhalf_ns,slope_ns)tau_ns=BorgMod_tau(v,vhalf_ns,slope_ns,tau0_ns,tauA_ns,tauG_ns,tauF_ns,tauDv_ns)}FUNCTIONBoltzmann(v(mV),v5(mV),s(mV)){Boltzmann=1/(1+exp((v-v5)/s))}FUNCTIONBorgMod_tau(v(mV),v5(mV),s(mV),tau0(ms),tauA(ms),tauG,tauF,tauDv(mV))(ms){LOCALkc,kr,Dv,wr,kfDv=(v-(v5+tauDv))kf=10^tauFBorgMod_tau=tau0+tauA*4*sqrt(tauG*(1-tauG))/(exp(-Dv*(1-tauG)*kf/s)+exp(Dv*tauG*kf/s))}FUNCTIONBoltz_m1(x,v5(mV),s(mV))(mV){Boltz_m1=s*log(1/x-1)+v5}PROCEDUREngate_adjust(ng,vh(mV),slp(mV)){LOCALx1,x2,v1,v2x1=0.3x2=0.7v1=Boltz_m1(x1,vh,slp)v2=Boltz_m1(x2,vh,slp)slp_adj=(v2-v1)/(log((1/x2)^(1/ng)-1)-log((1/x1)^(1/ng)-1))v5_adj=v1-slp_adj*log(1/x1^(1/ng)-1)}