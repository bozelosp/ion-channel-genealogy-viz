INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXIPlasSomRANGEC,lastrelease,lastspike,releaseat,DelayGLOBALCdur,DeadtimeGLOBALAlpha,BetaRANGEgaba,R0,R1,Rinf,RtauGLOBALU,trec,tfacRANGER,u,RG}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)}STATE{nmdaR_2}PARAMETER{Cdur=1(ms)Deadtime=1(ms)Delay=0.6Alpha=0.5(/msmM)Beta=0.25(/ms)tfac=20(ms)trec=700(ms)U=0.25}ASSIGNED{dt(ms)v(mV)i(nA)C(mM)gabaR0R1RinfRtau(ms)lastrelease(ms)lastspike(ms)releaseatRu}INITIAL{C=0R1=0gaba=0lastrelease=-9e4lastspike=-9e4releaseat=-9e4R=1u=U}BREAKPOINT{SOLVErelease}PROCEDURErelease(){LOCALqq=(t-lastspike)if(q>Deadtime){if(v>0){lastspike=treleaseat=t+Delay}}q=(t-lastrelease-Cdur)if(q>Deadtime){if(t>releaseat-dt/2&&t<releaseat+dt/2){lastrelease=tu=u*(exptable(-q/tfac))+U*(1-u*exptable(-q/tfac))R=R*(1-u)*exptable(-q/trec)+1-exptable(-q/trec)C=R*uRinf=C*Alpha/(C*Alpha+Beta)Rtau=1/((Alpha*C)+Beta)R0=gaba}}elseif(q<0){}elseif(C>0){C=0.R1=gaba}if(C>0){gaba=Rinf+(R0-Rinf)*exptable(-(t-lastrelease)/Rtau)}else{gaba=R1*exptable(-Beta*(t-(lastrelease+Cdur)))}VERBATIMreturn0;ENDVERBATIM}FUNCTIONexptable(x){TABLEFROM-10TO10WITH2000if((x>-10)&&(x<10)){exptable=exp(x)}else{exptable=0.}}