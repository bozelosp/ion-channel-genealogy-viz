NEURON{POINT_PROCESSIntervalFireRANGEtau,m,invlPOINTERr}PARAMETER{tau=5(ms)<1e-9,1e9>invl=10(ms)<1e-9,1e9>}ASSIGNED{mminft0(ms)r}INITIAL{minf=1/(1-exp(-invl/tau))specify_invl()m=0t0=tnet_send(firetime(),1)}FUNCTIONM(){M=minf+(m-minf)*exp(-(t-t0)/tau)}NET_RECEIVE(w){m=M()t0=tif(flag==0){m=m+wif(m>1){m=0net_event(t)}net_move(t+firetime())}else{net_event(t)m=0specify_invl()net_send(firetime(),1)}}FUNCTIONfiretime()(ms){firetime=tau*log((minf-m)/(minf-1))}PROCEDUREspecify_invl(){VERBATIM{externdoublenrn_random_pick(void*);if(!_p_r){return0.;}invl=nrn_random_pick((void*)_p_r);}ENDVERBATIMminf=1/(1-exp(-invl/tau))}PROCEDUREset_rand(){VERBATIM{externvoid*nrn_random_arg(int);void**ppr;ppr=(void**)(&(_p_r));*ppr=nrn_random_arg(1);}ENDVERBATIM}