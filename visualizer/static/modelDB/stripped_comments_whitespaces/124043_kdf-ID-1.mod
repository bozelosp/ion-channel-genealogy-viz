INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXkdfUSEIONkREADekWRITEikRANGEn,h,gk,gkbarRANGEninf,ntau,hinf,htau,vshiftRANGEikdGLOBALq10,temp,vmin,vmax,tadj,NGLOBALntau_slow1,ntau_slow2}UNITS{(mA)=(milliamp)(mV)=(millivolt)(pS)=(picosiemens)(um)=(micron)}PARAMETER{gkbar=2.5(pS/um2)v(mV)dt(ms)celsius(degC)temp=23(degC)q10=2.3vmin=-150(mV)vmax=100(mV)ntau_C1=1.25(ms)ntau_C2=171ntau_C3=-0.026(1/mV)ntau_C4=13(ms)ninf_a=-24ninf_b=14(mV)htau_C1=360(ms)htau_C2=810htau_C3=-75(mV)htau_C4=48(mV)htau_C5=22htau_C6=-55(mV)hinf_a=-54(mV)hinf_b=-11(mV)vshift=0(mV)ntau_slow1=1ntau_slow2=0N=3ek(mV)}ASSIGNED{ik(mA/cm2)gk(pS/um2)ninfntau(ms)htau(ms)hinftadjikd(mA/cm2)}STATE{nh}INITIAL{trates(v-vshift)n=ninfh=hinftadj=q10^((celsius-temp)/10)}BREAKPOINT{SOLVEstatesMETHODcnexpgk=gkbar*h*(tadj)*n^Nik=(1e-4)*gk*(v-ek)ikd=ik}DERIVATIVEstates{trates(v-vshift)ntau=ntau*ntau_slow1+ntau_slow2n'=(1-exp((-dt*tadj)/(ntau)))*(ninf-n)/dth'=(1-exp((-dt*tadj)/(htau)))*(hinf-h)/dt}PROCEDUREtrates(v){TABLEninf,ntau,hinf,htauDEPENDdt,celsius,temp,ntau_C1,ntau_C2,ntau_C3,ntau_C4,ninf_a,ninf_b,htau_C1,htau_C2,htau_C3,htau_C4,htau_C5,htau_C6,hinf_a,hinf_bFROMvminTOvmaxWITH199rates(v)}PROCEDURErates(v){LOCALntau_C2_50,ntau_C3_50ntau_C2_50=ntau_C2ntau_C3_50=ntau_C3if(v>-50){ntau_C2_50=ntau_C4ntau_C3_50=-ntau_C3}ntau=ntau_C1+ntau_C2_50*exp(-v*ntau_C3_50)ntau=ntauhtau=htau_C1+(htau_C2+htau_C5*(v-htau_C6))*exp(-((v-htau_C3)/htau_C4)^2)ninf=1/(1+exp((ninf_a-v)/ninf_b))hinf=1/(1+exp((hinf_a-v)/hinf_b))}