NEURON{SUFFIXkir_msUSEIONkREADekWRITEikRANGEgbar,gk,ik,shiftRANGEdamod,maxMod,level}UNITS{(S)=(siemens)(mV)=(millivolt)(mA)=(milliamp)}PARAMETER{gbar=0.0(S/cm2)shift=0.0(mV)q=1damod=0maxMod=1level=0}ASSIGNED{v(mV)ek(mV)ik(mA/cm2)gk(S/cm2)minfmtau(ms)}STATE{m}BREAKPOINT{SOLVEstatesMETHODcnexpgk=gbar*m*modulation()ik=gk*(v-ek)}DERIVATIVEstates{rates()m'=(minf-m)/mtau*q}INITIAL{rates()m=minf}PROCEDURErates(){UNITSOFFminf=1/(1+exp((v-(-82)-shift)/13))mtau=1/(exp((v-(-103))/(-14.5))+0.125/(1+exp((v-(-35))/(-19))))UNITSON}FUNCTIONmodulation(){modulation=1+damod*(maxMod-1)*level}