NEURON{POINT_PROCESSinterV2pyrV_STFDUSEIONcaREADeca,icaNONSPECIFIC_CURRENTigabaRANGEinitWRANGECdur_gaba,AlphaTmax_gaba,Beta_gaba,Erev_gaba,gbar_gaba,W,on_gaba,g_gabaRANGEeca,tauCa,IcatotalRANGEICag,P0g,fCagRANGECainf,pooldiam,zRANGElambda1,lambda2,threshold1,threshold2RANGEfmax,fmin,Wmax,Wmin,maxChange,normW,scaleW,srcid,destidRANGEpregid,postgid,thr_rpRANGEF,f,tauF,D1,d1,tauD1,D2,d2,tauD2RANGEfacfactor}UNITS{(mV)=(millivolt)(nA)=(nanoamp)(uS)=(microsiemens)FARADAY=96485(coul)pi=3.141592(1)}PARAMETER{srcid=-1(1)destid=-1(1)Cdur_gaba=0.7254(ms)AlphaTmax_gaba=7.2609(/ms)Beta_gaba=0.2667(/ms)Erev_gaba=-75(mV)gbar_gaba=0.6e-3(uS)Cainf=50e-6(mM)pooldiam=1.8172(micrometer)z=2k=0.01tauCa=50(ms)P0g=.01fCag=.024lambda1=2.5lambda2=0.01threshold1=0.47threshold2=0.52initW=4.5fmax=4fmin=.8GAPstart1=96000GAPstop1=196000thr_rp=1facfactor=1f=0(1)<0,1e9>tauF=20(ms)<1e-9,1e9>d1=0.95(1)<0,1>tauD1=40(ms)<1e-9,1e9>d2=0.9(1)<0,1>tauD2=70(ms)<1e-9,1e9>}ASSIGNED{v(mV)eca(mV)ica(nA)igaba(nA)g_gaba(uS)on_gabaWt0(ms)ICan(mA)ICag(mA)Afactor(mM/ms/nA)Icatotal(mA)dW_gabaWmaxWminmaxChangenormWscaleWpregidpostgidrptsynfaFD1D2}STATE{r_nmdar_gabacapoolcon}INITIAL{on_gaba=0r_gaba=0W=initWt0=-1Wmax=fmax*initWWmin=fmin*initWmaxChange=(Wmax-Wmin)/10dW_gaba=0capoolcon=CainfAfactor=1/(z*FARADAY*4/3*pi*(pooldiam/2)^3)*(1e6)fa=0F=1D1=1D2=1}BREAKPOINT{SOLVEreleaseMETHODcnexp}DERIVATIVErelease{if(t0>0){if(rp<thr_rp){if(t-t0<Cdur_gaba){on_gaba=1}else{on_gaba=0}}else{on_gaba=0}}if(t0>0){if(rp<thr_rp){if(t-t0<Cdur_gaba){on_gaba=1}else{on_gaba=0}}else{on_gaba=0}}r_gaba'=AlphaTmax_gaba*on_gaba*(1-r_gaba)-Beta_gaba*r_gabadW_gaba=eta(capoolcon)*(lambda1*omega(capoolcon,threshold1,threshold2)-lambda2*GAP1(GAPstart1,GAPstop1)*W)*dtif(fabs(dW_gaba)>maxChange){if(dW_gaba<0){dW_gaba=-1*maxChange}else{dW_gaba=maxChange}}normW=(W-Wmin)/(Wmax-Wmin)if(dW_gaba<0){scaleW=sqrt(fabs(normW))}else{scaleW=sqrt(fabs(1.0-normW))}W=W+dW_gaba*scaleWif(W>Wmax){W=Wmax}elseif(W<Wmin){W=Wmin}g_gaba=gbar_gaba*r_gaba*facfactorigaba=W*g_gaba*(v-Erev_gaba)ICag=P0g*g_gaba*(v-eca)Icatotal=ICag+k*ica*4*pi*((15/2)^2)*(0.01)capoolcon'=-fCag*Afactor*Icatotal+(Cainf-capoolcon)/tauCa}NET_RECEIVE(dummy_weight){t0=trp=unirand()D1=1-(1-D1)*exp(-(t-tsyn)/tauD1)D2=1-(1-D2)*exp(-(t-tsyn)/tauD2)tsyn=tfacfactor=F*D1*D2if(F>3){F=3}if(facfactor<0.7){facfactor=0.7}D1=D1*d1D2=D2*d2}FUNCTIONeta(Cani(mM)){LOCALtaulearn,P1,P2,P4,CaconP1=0.1P2=P1*1e-4P4=1Cacon=Cani*1e3taulearn=P1/(P2+Cacon*Cacon*Cacon)+P4eta=1/taulearn*0.001}FUNCTIONomega(Cani(mM),threshold1(uM),threshold2(uM)){LOCALr,mid,CaconCacon=Cani*1e3r=(threshold2-threshold1)/2mid=(threshold1+threshold2)/2if(Cacon<=threshold1){omega=0}elseif(Cacon>=threshold2){omega=1/(1+50*exp(-50*(Cacon-threshold2)))}else{omega=-sqrt(r*r-(Cacon-mid)*(Cacon-mid))}}FUNCTIONGAP1(GAPstart1(ms),GAPstop1(ms)){LOCALsif(t<=GAPstart1){GAP1=1}elseif(t>=GAPstart1&&t<=GAPstop1){GAP1=1}else{GAP1=1}}FUNCTIONunirand(){unirand=scop_random()}