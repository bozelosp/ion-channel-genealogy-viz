NEURON{POINT_PROCESSSACexcRANGEVpre,VinfGLOBALtau,Vtau,e,maxves,gsingle,newvesRANGErelease,numves,g,s_inf,t1,i,gRANGElocx,locy,local_vNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(nS)=(nanomho)}PARAMETER{maxves=10newves=0.01Vtau=30(/ms)gsingle=0.2(nS)tau=3(ms)e=0(mV)locx=0locy=0}ASSIGNED{Vinf(mV)s_inft1numvesreleasev(mV)i(nA)local_v(mV)}STATE{g(nS)Vpre(mV)}BREAKPOINT{SOLVEstateMETHODeulerif(t>t1){releasefunc(Vpre)t1=t1+1}i=(1e-3)*g*(v-e)local_v=v}INITIAL{s_inf=0release=0numves=maxvest1=0Vinf=0Vpre=Vinfg=0}FUNCTIONreleasefunc(vpre){LOCALrand,addvess_inf=vpre/100release=0FROMrand=0TOnumves-1{if(scop_random()<s_inf){release=release+1}}if(release>0){numves=numves-releaseif(numves<0){numves=0}state_discontinuity(g,g+release*gsingle)}addves=0FROMrand=0TOmaxves-numves-1{if(scop_random()<newves){addves=addves+1}}numves=numves+addves}DERIVATIVEstate{g'=-g/tauVpre'=(-Vpre+Vinf)/Vtau}