INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{POINT_PROCESSornRANGEg_e,g_e_max,cc_peak,g_e_baselineRANGEstd_e,tau_e,D_eNONSPECIFIC_CURRENTiTHREADSAFEPOINTERdonotuse}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)}PARAMETER{dt(ms)E_e=0(mV)g_e_max=75e-3(umho)cc_peak=0g_e_baseline=0(umho)std_e=1e-3(umho)tau_e=400(ms)}ASSIGNED{v(mV)i(nA)g_e(umho)g_e1(umho)D_e(umhoumho/ms)exp_eamp_e(umho)donotuse}STATE{OCD}INITIAL{g_e1=0if(tau_e!=0){D_e=2*std_e*std_e/tau_eexp_e=exp(-dt/tau_e)amp_e=std_e*sqrt((1-exp(-2*dt/tau_e)))}O=0C=1D=0}BREAKPOINT{LOCALSORNSOLVEoupSOLVEstatesMETHODderivimplicitif(tau_e==0){g_e=std_e*normrand123()}SORN=O*(1-D)g_e=g_e1+SORN*cc_peak*g_e_max+g_e_baselineif(g_e<0){g_e=0}i=g_e*(v-E_e)}DERIVATIVEstates{LOCALKO,KC1,KC2,KD1,KD2KO=1/100KC1=1/100KC2=1e-4KD1=1/6000KD2=1/100O'=KO*(1-C-O)C'=KC1*(1-C)*C+KC2*(1-C)D'=KD1*O*(1-D)-KD2*D*(1-O)}PROCEDUREoup(){if(tau_e!=0){g_e1=exp_e*g_e1+amp_e*normrand123()}}NET_RECEIVE(dummy){C=0}VERBATIMdoublenrn_random_pick(void*r);Rand*nrn_random_arg(intagpos);ENDVERBATIMFUNCTIONnormrand123(){VERBATIMif(_p_donotuse){_lnormrand123=nrn_random_pick(_p_donotuse);}else{if(_nt!=nrn_threads){hoc_execerror("multithreadrandominNetStim","onlyviahocRandom");}ENDVERBATIMnormrand123=normrand(0,1)VERBATIM}ENDVERBATIM}PROCEDUREnoiseFromRandom(){VERBATIM{void**pv=(void**)(&_p_donotuse);if(ifarg(1)){*pv=nrn_random_arg(1);}else{*pv=(void*)0;}}ENDVERBATIM}