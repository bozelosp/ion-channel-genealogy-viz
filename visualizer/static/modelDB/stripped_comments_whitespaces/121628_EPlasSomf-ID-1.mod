INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXEPlasSomfRANGEC,lastrelease,lastspike,releaseat,DelayGLOBALCdur,Deadtime,terrorGLOBALAlpha_1RANGEampa,R0_1,R1_1,Rinf_1,Rtau_1,Beta_1GLOBALAlpha_2,Beta_2GLOBALDurNMDA,tauNMDARANGER,U,u,trec,tfac,RG}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)}STATE{nmdaR_2}PARAMETER{terrorCdur=1(ms)Deadtime=1(ms)Delay=1.4(ms)Alpha_1=1.5(/msmM)Beta_1=0.75(/ms)Alpha_2=0.25(/msmM)Beta_2=0.025(/ms)DurNMDA=0.4tauNMDA=50tfac=0.01(ms)trec=500(ms)U=0.5}ASSIGNED{dt(ms)v(mV)i(nA)C(mM)ampaR0_1R1_1Rinf_1Rtau_1(ms)RGlastrelease(ms)lastspike(ms)releaseatRu}INITIAL{terror=dt/10C=0ampa=0lastrelease=-9e4lastspike=-9e4releaseat=-9e4R=1u=U}BREAKPOINT{SOLVErelease}PROCEDURErelease(){LOCALqq=(t-lastspike)if(q>Deadtime){if(v>-20){lastspike=treleaseat=t+Delay}}q=(t-lastrelease-Cdur)if(q>Deadtime){if(t>releaseat-terror&&t<releaseat+terror){lastrelease=tu=u*(exptable(-q/tfac))+U*(1-u*exptable(-q/tfac))R=R*(1-u)*exptable(-q/trec)+1-exptable(-q/trec)C=R*uRinf_1=C*Alpha_1/(C*Alpha_1+Beta_1)Rtau_1=1/((Alpha_1*C)+Beta_1)R0_1=ampaR_2=(1-R_2)*0.5+R_2}}elseif(q<0){}elseif(C>0){C=0.R1_1=ampa}if(C>0){ampa=Rinf_1+(R0_1-Rinf_1)*exptable(-(t-lastrelease)/Rtau_1)}else{ampa=R1_1*exptable(-Beta_1*(t-(lastrelease+Cdur)))}SOLVEG_proteinMETHODeulerVERBATIMreturn0;ENDVERBATIM}DERIVATIVEG_protein{R_2'=-(R_2/tauNMDA)if(R_2<0.01){RG=0.0}else{RG=1/(1+exptable(-((R_2)-DurNMDA)/0.05))}nmda'=Alpha_2*RG*(1-nmda)-Beta_2*nmda}FUNCTIONexptable(x){TABLEFROM-10TO10WITH2000if((x>-10)&&(x<10)){exptable=exp(x)}else{exptable=0.}}