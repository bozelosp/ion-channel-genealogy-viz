NEURON{POINT_PROCESSgabaUSEIONclREADeclWRITEiclVALENCE-1NONSPECIFIC_CURRENTihco3RANGEtau1,tau2,gRANGEP,HCO3e,HCO3i,iRANGEicl,ihco3,ehco3,eGLOBALtotal}UNITS{(mA)=(milliamp)(nA)=(nanoamp)(mV)=(millivolt)(uS)=(micromho)(mM)=(milli/liter)F=(faraday)(coulombs)R=(k-mole)(joule/degC)}PARAMETER{tau1=.1(ms)<1e-9,1e9>tau2=10(ms)<1e-9,1e9>HCO3e=26(mM)HCO3i=16(mM)P=0.18celsius=37(degC)}ASSIGNED{v(mV)icl(nA)ihco3(nA)i(nA)g(uS)factortotal(uS)ecl(mV)ehco3(mV)e(mV)}STATE{A(uS)B(uS)}INITIAL{LOCALtptotal=0if(tau1/tau2>.9999){tau1=.9999*tau2}A=0B=0tp=(tau1*tau2)/(tau2-tau1)*log(tau2/tau1)factor=-exp(-tp/tau1)+exp(-tp/tau2)factor=1/factorehco3=log(HCO3i/HCO3e)*(1000)*(celsius+273.15)*R/Fe=P*ehco3+(1-P)*ecl}BREAKPOINT{SOLVEstateMETHODcnexpg=B-Aicl=(1-P)*g*(v-ecl)ihco3=P*g*(v-ehco3)i=icl+ihco3e=P*ehco3+(1-P)*ecl}DERIVATIVEstate{A'=-A/tau1B'=-B/tau2}NET_RECEIVE(weight(uS)){A=A+weight*factorB=B+weight*factortotal=total+weight}