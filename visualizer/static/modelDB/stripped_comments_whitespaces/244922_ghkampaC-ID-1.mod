NEURON{POINT_PROCESSghkampaCUSEIONnaWRITEinaUSEIONkWRITEikRANGEC,TRise,tau,lrRANGEAlpha,BetaRANGEiampaRANGEP,Pmax}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)(molar)=(1/liter)(mM)=(millimolar)R=(k-mole)(joule/degC)FARADAY=(faraday)(coulomb)}PARAMETER{TRise=0.6(ms)<1e-9,1e9>tau=3(ms)<1e-9,1e9>nai=18(mM)nao=140(mM)ki=140(mM)ko=5(mM)celsius=35(degC)Pmax=1e-6}ASSIGNED{v(mV)ina(nA)ik(nA)Alpha(/msmM)Beta(/ms)C(mM)P(cm/s)iampa(nA)Area(cm2)lr}STATE{S}INITIAL{S=0Beta=1/tauAlpha=1/TRise-BetaArea=1}BREAKPOINT{SOLVEstatesMETHODcnexpP=(Pmax*S*(Alpha+Beta))/(Alpha*(1-1/exp(1)))ina=P*ghk(v,nai,nao,1)*Areaik=P*ghk(v,ki,ko,1)*Areaiampa=ina+ik}DERIVATIVEstates{S'=Alpha*C*(1-S)-Beta*S}FUNCTIONghk(v(mV),ci(mM),co(mM),z)(0.001coul/cm3){LOCALarg,eci,ecoarg=(0.001)*z*FARADAY*v/(R*(celsius+273.15))eco=co*efun(arg)eci=ci*efun(-arg)ghk=(0.001)*z*FARADAY*(eci-eco)}FUNCTIONefun(z){if(fabs(z)<1e-4){efun=1-z/2}else{efun=z/(exp(z)-1)}}