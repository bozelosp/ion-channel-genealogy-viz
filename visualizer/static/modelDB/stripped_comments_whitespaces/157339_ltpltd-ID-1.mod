NEURON{POINT_PROCESSltpltdRANGEe,i,g2,peso,U,tau_facil,tau_rec,tau_1,Rin,AseRANGEu0,Pini,Nini,deltap,deltad,f,nip,nid,gamma,eta,VViniNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)}PARAMETER{e=0(mV)tau_1=3(ms)<1e-9,1e9>tau_rec=50(ms)<1e-9,1e9>tau_facil=200(ms)<0,1e9>U=0.36(1)<0,1>u0=0(1)<0,1>f=0.05e-3deltap=400deltad=400gamma=0.2eta=2e-3nip=0.0987nid=0.07lambdap=1e-3lambdad=2e-3mp=3e-3md=3e-3ap=2ad=0.5taum=40Rin=10e7Ase=2.5e-7Pini=0Nini=0VVini=0g2=43(umho)peso=0.5e-6}ASSIGNED{v(mV)i(nA)xy}STATE{g(umho)CNpNdVV(mV)}INITIAL{VV=VVinig=0C=0Np=PiniNd=Nini}FUNCTIONv2(v){if(v<-65){v2=0}else{v2=v+65}}BREAKPOINT{SOLVEstateMETHODderivimpliciti=-g2*VV}DERIVATIVEstate{g'=-g/tau_1C'=gamma*(VV)-eta*C+peso*(v2(v))Np'=nip*C-(lambdap+g*deltap)*Np+((mp*Np*Np)/(ap+Np*Np))Nd'=nid*C-(lambdad+g*deltad)*Nd+((md*Nd*Nd)/(ad+Nd*Nd))VV'=-(VV/taum)+Rin*Ase*g*((1/taum)+f*(deltap*Np-deltad*Nd))}NET_RECEIVE(weight(umho),y,z,u,tsyn(ms)){INITIAL{y=0z=0u=u0tsyn=t}z=z*exp(-(t-tsyn)/tau_rec)z=z+(y*(exp(-(t-tsyn)/tau_1)-exp(-(t-tsyn)/tau_rec))/((tau_1/tau_rec)-1))y=y*exp(-(t-tsyn)/tau_1)x=1-y-zif(tau_facil>0){u=u*exp(-(t-tsyn)/tau_facil)}else{u=U}if(tau_facil>0){state_discontinuity(u,u+U*(1-u))}state_discontinuity(g,g+weight*x*u)state_discontinuity(y,y+x*u)tsyn=t}