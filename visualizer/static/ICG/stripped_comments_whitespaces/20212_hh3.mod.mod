NEURON{SUFFIXhh3USEIONnaREADenaWRITEinaUSEIONkREADekWRITEikNONSPECIFIC_CURRENTilRANGEgnabar,gkbar,gl,elRANGEgna,gkGLOBALinf}UNITS{(mA)=(milliamp)(mV)=(millivolt)}INDEPENDENT{tFROM0TO1WITH1(ms)}PARAMETER{v(mV)celsius=37(degC)dt(ms)gnabar=0.0(mho/cm2)gkbar=1.0(mho/cm2)gl=0(mho/cm2)ena=40(mV)ek=-100(mV)el=-70.0(mV)}STATE{mhn}ASSIGNED{ina(mA/cm2)ik(mA/cm2)il(mA/cm2)inf[3]gnagk}LOCALfac[3]BREAKPOINT{SOLVEstatesgna=gnabar*m*m*hina=gna*(v-ena)gk=gkbar*n*nik=gk*(v-ek)il=gl*(v-el)}INITIAL{mhn(v*1(/mV))m=inf[0]h=inf[1]n=inf[2]}PROCEDUREstates(){mhn(v*1(/mV))m=m+fac[0]*(inf[0]-m)h=h+fac[1]*(inf[1]-h)n=n+fac[2]*(inf[2]-n)VERBATIMreturn0;ENDVERBATIM}UNITSOFFFUNCTIONexpM1(x,y){if(fabs(x/y)<1e-6){expM1=y*(1-x/2)}else{expM1=x/(exp(x/y)-1)}}FUNCTIONvarss(v,i){if(i==0){varss=1/(1+exp((v+40)/(-3)))}elseif(i==1){varss=1/(1+exp((v+45)/(3)))}else{varss=1/(1+exp((v+40)/(-3)))}}FUNCTIONvartau(i){if(i==0){vartau=0.05}elseif(i==1){vartau=0.5}else{vartau=2}}PROCEDUREmhn(v){LOCALa,b,tauTABLEinf,facDEPENDdt,celsiusFROM-100TO100WITH200FROMi=0TO2{tau=vartau(i)inf[i]=varss(v,i)fac[i]=(1-exp(-dt/tau))}}UNITSON