NEURON{POINT_PROCESSAMPARANGEtau,e,iNONSPECIFIC_CURRENTiRANGEgGLOBALtotal,near_unity,gfacUSEIONampa1WRITEiampa1VALENCE0USEIONampa2WRITEiampa2VALENCE0RANGEsrcgid,targid,comp,synid}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(uS)=(microsiemens)}PARAMETER{near_unity=0.999(1)tau=10(ms)<1e-9,1e9>e=0(mV)gfac=1}ASSIGNED{v(mV)i(nA)g(uS)factortotal(uS)tau1(ms)iampa1(nA)iampa2(nA)srcgidtargidcompsynid}STATE{A(uS)B(uS)}INITIAL{LOCALtptotal=0tau1=near_unity*tauA=0B=0tp=(tau1*tau)/(tau-tau1)*log(tau/tau1)factor=-exp(-tp/tau1)+exp(-tp/tau)factor=1/factorfactor=factor*tau*exp(-1)*1(/ms)}BREAKPOINT{SOLVEstateMETHODcnexpg=B-Ag=gfac*gi=g*(v-e)iampa1=giampa2=-g}DERIVATIVEstate{A'=-A/tau1B'=-B/tau}NET_RECEIVE(weight(uS)){A=A+weight*factorB=B+weight*factortotal=total+weight}