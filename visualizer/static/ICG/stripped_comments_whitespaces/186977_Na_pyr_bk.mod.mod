UNITS{(mV)=(millivolt)(mA)=(milliamp)(pS)=(picosiemens)(um)=(micron)}NEURON{SUFFIXNaPyrUSEIONnaREADenaWRITEinaRANGEgbar,ina,minf,malpha,mbetaGLOBALv_table_min,v_table_max,ena}PARAMETER{gbar=350(pS/um2)v(mV)ena(mV)phih=5(1)phim=5(1)v_table_min=-120(mV)v_table_max=100(mV)}ASSIGNED{ina(mA/cm2)halpha(1/ms)hbeta(1/ms)malpha(1/ms)mbeta(1/ms)}STATE{h(1)m(1)}BREAKPOINT{settables(v)SOLVEstatesMETHODcnexpina=(1e-4)*gbar*m*m*m*h*(v-ena)}INITIAL{settables(v)h=halpha/(halpha+hbeta)m=malpha/(malpha+mbeta)}DERIVATIVEstates{h'=phih*(halpha*(1-h)-hbeta*h)m'=phim*(malpha*(1-m)-mbeta*m)}UNITSOFFPROCEDUREsettables(v(mV)){TABLEhalpha,hbeta,malpha,mbetaFROMv_table_minTOv_table_maxWITH961halpha=0.128*(exp(-(v+50)/18))hbeta=4/(1+exp(-0.2*(v+27)))malpha=0.32*vtrap(-(v+54),0.25)mbeta=0.28*vtrap((v+27),0.2)}UNITSONFUNCTIONvtrap(x,k){if(fabs(x)<1e-6){vtrap=1/(k*exp(k*x))}else{vtrap=x/(exp(k*x)-1)}}