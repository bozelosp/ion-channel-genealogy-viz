UNITS{(mV)=(millivolt)(mA)=(milliamp)}INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXInhIAFNONSPECIFIC_CURRENTiGLOBALspikedur,refact,tauAHP,eAHP,gAHPbar,ThrConstRANGEThr,lastspikeRANGEgPAS,ePAS,gAHP,AHPon,gON,gOFF,eON,eOFFRANGESetCa,AvgCa,Ca,tauDCCa,GainRANGEScaleFactor,InductionGLOBALSCALE,GainConstGLOBALtstop,terrorRANGEB}PARAMETER{gPAS=0.0001ePAS=-60(mV)spikedur=0.6refact=3ThrConst=-50Thr=-50gONconst=1(mho/cm2)gOFFconst=1(mho/cm2)eON=40(mV)eOFF=-65tauAHP=0.1(/ms)gAHPbar=0.00005(mho/cm2)eAHP=-90(mv)SetCa=1tauDCCa=10SCALE=0GainConst=0.1tstopterror}ASSIGNED{vi(mA/cm2)lastspikegAHP(mho/cm2)AHPongON(mho/cm2)gOFF(mho/cm2)CaAvgCaScaleFactorInductionGainB}INITIAL{gAHP=0AHPon=-9e4gON=0gOFF=0terror=dt/10lastspike=-9e4Ca=0Induction=0}BREAKPOINT{SOLVEupdatei=gPAS*(v-ePAS)+gAHP*(v-eAHP)+gON*(v-eON)+gOFF*(v-eOFF)B=mgblock(v)}PROCEDUREupdate(){LOCALq,dvgON=0gOFF=0q=(t-lastspike)-spikedurif(q>refact){if(v>Thr){gON=gONconstlastspike=tCa=Ca+1}}elseif(q<0){gON=gONconst}elseif(v>0){gOFF=gOFFconstgAHP=gAHP+gAHPbarAHPon=t}gAHP=gAHP-gAHP*tauAHP*dtif(t>(tstop-(2*dt)+terror)){if(Induction==0){SOLVEINDUCTION}}VERBATIMreturn0;ENDVERBATIM}PROCEDUREINDUCTION(){AvgCa=AvgCa+(Ca-AvgCa)/tauDCCaScaleFactor=GainConst*(SetCa-AvgCa)*SCALEInduction=1}FUNCTIONmgblock(v(mV)){TABLEFROM-140TO80WITH1000if(v>-59){mgblock=1/(1+exp((-35-v)/6))}else{mgblock=0}}