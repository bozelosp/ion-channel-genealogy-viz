NEURON{SUFFIXnargcUSEIONnaREADenaWRITEinaRANGEgbarGLOBALminf,hinf,mtau,htau}PARAMETER{gbar=0.010(mho/cm2)ena(mV)celsiusv(mV)}UNITS{(mA)=(milliamp)(mV)=(millivolt)(pS)=(picosiemens)(um)=(micron)}ASSIGNED{ina(mA/cm2)minfhinfmtau(ms)htau(ms)}STATE{mh}BREAKPOINT{SOLVEstatesMETHODcnexpina=gbar*m*m*m*h*(v-ena)}INITIAL{trates(v)m=minfh=hinf}DERIVATIVEstates{trates(v)m'=(minf-m)/mtauh'=(hinf-h)/htau}PROCEDUREtrates(vm){LOCALa,ba=trap0(vm,-29,0.5,0.18)b=6*exp(-(vm+45)/15)minf=a/(a+b)mtau=1/(a+b)a=0.15*exp(-(vm+47)/20)b=2.8/(1+exp(-0.1*(vm+20)))hinf=a/(a+b)htau=1/(a+b)}FUNCTIONtrap0(v,th,a,q){if(fabs(v-th)>1e-6){trap0=a*(v-th)/(1-exp(-(v-th)*q))}else{trap0=a/q}}