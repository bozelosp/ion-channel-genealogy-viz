UNITS{(umho)=(micromho)(nA)=(nanoamp)(mA)=(milliamp)(mV)=(millivolt)}NEURON{POINT_PROCESSabbottPOINTERvpreNONSPECIFIC_CURRENTiRANGEd,sRANGEtauD,tauS,taug,GRANGEerev,thresh}STATE{DSg(umho)}PARAMETER{v(mV)erev=0(mV)thresh=0.5(mV)d=0.4s=1.0tauD=300(ms)tauS=20e3(ms)taug=2(ms)G=10e-12(umho)}ASSIGNED{i(nA)firingvpre(mV)}INITIAL{firing=0D=1S=1g=0}BREAKPOINT{SOLVEdepressionMETHODeuleraux()}DERIVATIVEdepression{check()D'=(1/tauD)*(1-D)S'=(1/tauS)*(1-S)g'=(1/taug)*(-g)}PROCEDUREaux(){i=(g*(v-erev))}PROCEDUREcheck(){if(firing&&(vpre<thresh)){firing=0}if((vpre>=thresh)&&!firing){firing=1D=d*DS=s*Sg=g+G*D*S}}PROCEDUREcheck2(){VERBATIMif((v>=thresh)&&!firing){firing=1;}if(firing&&(v<thresh)){firing=0;}return0;ENDVERBATIM}