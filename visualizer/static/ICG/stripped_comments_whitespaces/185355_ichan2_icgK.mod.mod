UNITS{(mA)=(milliamp)(mV)=(millivolt)(uF)=(microfarad)(molar)=(1/liter)(nA)=(nanoamp)(mM)=(millimolar)(um)=(micron)FARADAY=96520(coul)R=8.3134(joule/degC)}NEURON{SUFFIXichan2USEIONkREADekWRITEikRANGEgnatbar,gkfbar,gksbarRANGEgl,el,ina,ik,il,ggabaa,igabaa,egabaaGLOBALek}PARAMETER{gnatbar(mho/cm2)ena(mV)gkfbar=1.0(mho/cm2)gksbar=1.0(mho/cm2)ek(mV)gl(mho/cm2)el(mV)ggabaa(mho/cm2)egabaa(mV)}STATE{mhnfns}ASSIGNED{v(mV)celsius(degC)dt(ms)gna(mho/cm2)ina(mA/cm2)gkf(mho/cm2)gks(mho/cm2)ik(mA/cm2)il(mA/cm2)igabaa(mA/cm2)minfhinfnfinfnsinfmtau(ms)htau(ms)nftau(ms)nstau(ms)mexphexpnfexpnsexpq10}BREAKPOINT{SOLVEstatesgna=gnatbar*m*m*m*hgkf=gkfbar*nf*nf*nf*nfgks=gksbar*ns*ns*ns*nsik=gkf*(v-ek)+gks*(v-ek)}INITIAL{trates(v)m=minfh=hinfnf=nfinfns=nsinfVERBATIMreturn0;ENDVERBATIM}PROCEDUREstates(){trates(v)m=m+mexp*(minf-m)h=h+hexp*(hinf-h)nf=nf+nfexp*(nfinf-nf)ns=ns+nsexp*(nsinf-ns)VERBATIMreturn0;ENDVERBATIM}PROCEDURErates(v){LOCALalpha,beta,sumq10=3^((celsius-6.3)/10)alpha=-0.3*vtrap((v+60-17),-5)beta=0.3*vtrap((v+60-45),5)sum=alpha+betamtau=1/summinf=alpha/sumalpha=0.23/exp((v+60+5)/20)beta=3.33/(1+exp((v+60-47.5)/-10))sum=alpha+betahtau=1/sumhinf=alpha/sumalpha=-0.028*vtrap((v+65-35),-6)beta=0.1056/exp((v+65-10)/40)sum=alpha+betanstau=1/sumnsinf=alpha/sumalpha=-0.07*vtrap((v+65-47),-6)beta=0.264/exp((v+65-22)/40)sum=alpha+betanftau=1/sumnfinf=alpha/sum}PROCEDUREtrates(v){LOCALtincrates(v)tinc=-dt*q10mexp=1-exp(tinc/mtau)hexp=1-exp(tinc/htau)nfexp=1-exp(tinc/nftau)nsexp=1-exp(tinc/nstau)}FUNCTIONvtrap(x,y){if(fabs(x/y)<1e-6){vtrap=y*(1-x/y/2)}else{vtrap=x/(exp(x/y)-1)}}