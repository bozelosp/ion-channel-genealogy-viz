NEURON{SUFFIXnapsiUSEIONnaREADenaWRITEinaRANGEgbar,thegna,sh,ar,ari,minf,sinf,hinf,taui,tausGLOBALmtau,vslope,ena}PARAMETER{gbar=.0052085(mho/cm2)sh=0(mV)vslope=6.8(mV)mtau=1(ms)ena(mV)a0s=0.001(/ms)b0s=0.0034(/ms)asvh=-85(mV)bsvh=-17(mV)avs=30(mV)bvs=10(mV)ar=1(1)a0i=0.01(/ms)b0i=0.034(/ms)aivh=-85(mV)bivh=-17(mV)avi=30(mV)bvi=10(mV)ari=1(1)celsius(degC)v(mV)}UNITS{(mA)=(milliamp)(mV)=(millivolt)(pS)=(picosiemens)(um)=(micron)}ASSIGNED{ina(mA/cm2)thegna(mho/cm2)minfsinfhinftaus(ms)taui(ms)}STATE{msh}UNITSOFFBREAKPOINT{SOLVEstatesMETHODcnexpthegna=gbar*m*s*hina=thegna*(v-ena)}INITIAL{trates(v,ar,ari,sh)m=minfs=sinfh=hinf}DERIVATIVEstates{trates(v,ar,ari,sh)s'=(sinf-s)/tausm'=(minf-m)/mtauh'=(hinf-h)/taui}PROCEDUREtrates(vm,a1,a2,sh2){LOCALc,ciminf=(1/(1+exp(-(vm+52.3-sh2)/vslope)))taus=1/(alps(vm)+bets(vm))taui=1/(alpi(vm)+beti(vm))c=alps(vm)*taussinf=c+a1*(1-c)ci=alpi(vm)*tauihinf=ci+a2*(1-ci)}FUNCTIONalps(v(mV)){alps=a0s*exp((asvh-v)/avs)}FUNCTIONbets(v(mV)){bets=b0s/(exp((bsvh-v)/bvs)+1)}FUNCTIONalpi(v(mV)){alpi=a0i*exp((aivh-v)/avi)}FUNCTIONbeti(v(mV)){beti=b0i/(exp((bivh-v)/bvi)+1)}UNITSON