INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{POINT_PROCESSpIpulseRANGEactiveRANGEdel,dur,i0,amp,pfreq,pdurUSEIONzREADezWRITEizVALENCE1}UNITS{(nA)=(nanoamp)(mV)=(millivolt)}PARAMETER{active=0del=0(ms)dur=10000(ms)i0=0(nA)amp=0(nA)pfreq=1(Hz)pdur=500(ms)}ASSIGNED{iz(nA)ez(mV)Npulsespstart(ms)pstop(ms)}INITIAL{iz=0Npulses=0pstart=delpstop=pstart+pdurVERBATIMprintf("%f\n",pstart);ENDVERBATIM}BREAKPOINT{if(active){if((t>=pstart)&&(t<dur)){VERBATIMprintf("%f\n",active);ENDVERBATIMiz=-(amp+i0)Npulses=Npulses+1pstart=del+Npulses*1000/pfreqif(1000/pfreq<=pdur){pstop=del+dur}}elseif(t>=pstop){iz=-i0pstop=pstart+pdur}}else{iz=0}}PROCEDUREUpdate(){VERBATIMNpulses=(int)((t-del)*pfreq/1000);ENDVERBATIMpstart=del+Npulses*1000/pfreqif(1000/pfreq<=pdur){pstop=del+dur}else{pstop=pstart+pdur}}