NEURON{POINT_PROCESSSpGen2RANGEy,t01,t02RANGEfast_freq,slow_freq,APinburst,startbursting,endburstingRANGEnoise,delay}PARAMETER{t01=20(ms)t02=420000(ms)fast_freq=100(/s)slow_freq=4(/s)APinburst=10startbursting=2000(ms)endbursting=3000(ms)noise=0}ASSIGNED{fast_invl(ms)slow_invl(ms)yburstevent(ms)burst_off(ms)burst_on(ms)on}PROCEDUREseed(x){set_seed(x)}INITIAL{on=0y=-70endbursting=endbursting-1e-6if(slow_freq!=0.){slow_invl=(1/slow_freq)*(1000)}if(fast_freq!=0.){fast_invl=(1/fast_freq)*(1000)}burst=1if(t01>0){event=t01net_send(event,4)}if(t02>0){event=t02net_send(event,4)}if(startbursting>=0&&APinburst>0){event=startburstingnet_send(event,3)}}FUNCTIONinterval(mean(ms))(ms){if(mean<=0.){mean=.01(ms)}if(noise==0){interval=mean}else{interval=(1.-noise)*mean+noise*mean*exprand(1)}}PROCEDUREevent_time(){if(slow_freq==0||(burst!=0.&&APinburst>1)){event=event+interval(fast_invl)if(slow_freq>0&&event>burst_on+burst_off){burst=0.}}else{burst=1.event=event+interval(slow_invl-(APinburst-1)*fast_invl)burst_on=eventburst_off=interval((APinburst-1)*fast_invl)-1e-6}if(event>endbursting){on=0}}NET_RECEIVE(w){if(flag==3){if(on==0){on=1event=tburst_on=eventburst_off=interval((APinburst-1)*fast_invl)-1e-6net_send(0,1)}}if(flag==4){if(on==0){on=1event=tnet_send(0,1)}}if(flag==1&&on==1){y=20net_event(t)if(t>=startbursting&&t<=endbursting){event_time()net_send(event-t,1)}else{on=0}net_send(.1,2)}if(flag==2){y=-70}}