UNITS{(mA)=(milliamp)(mV)=(millivolt)}NEURON{SUFFIXNasomaUSEIONnaREADenaWRITEinaNONSPECIFIC_CURRENTilRANGEgnasoma,gl,el,inaGLOBALminf,hinf,hexp,mtau,htau}INDEPENDENT{tFROM0TO1WITH1(ms)}PARAMETER{v(mV)celsius=24(degC)dt(ms)gnasoma=.0107(mho/cm2)gl=.00005(mho/cm2)el=-70(mV)}STATE{mh}ASSIGNED{ena(mV)ina(mA/cm2)il(mA/cm2)minfmexphinfhexpmtau(ms)htau(ms)}INITIAL{m=minfh=hinf}BREAKPOINT{SOLVEstatesina=gnasoma*minf*minf*minf*h*(v-ena)il=gl*(v-el)}PROCEDUREstates(){evaluate_fct(v)h=h+hexp*(hinf-h)VERBATIMreturn0;ENDVERBATIM}UNITSOFFPROCEDUREevaluate_fct(v(mV)){LOCALq10,tinc,alpha,betaTABLEminf,hinf,hexp,mtau,htauDEPENDdt,celsiusFROM-200TO100WITH300q10=3^((celsius-24)/10)tinc=-dt*q10alpha=0.1*vtrap(-(v+38),10)beta=4*exp(-(v+63)/18)mtau=1/(alpha+beta)minf=alpha*mtaualpha=0.07*Exp(-(v+63)/20)beta=1/(1+Exp(-(v+33)/10))htau=1/(alpha+beta)hinf=alpha*htauhexp=1-Exp(tinc/htau)}FUNCTIONvtrap(x,y){if(fabs(x/y)<1e-6){vtrap=y*(1-x/y/2)}else{vtrap=x/(Exp(x/y)-1)}}FUNCTIONExp(x){if(x<-100){Exp=0}else{Exp=exp(x)}}UNITSON