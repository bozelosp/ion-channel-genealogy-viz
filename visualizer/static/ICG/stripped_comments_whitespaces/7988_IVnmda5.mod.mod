INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{POINT_PROCESSIVNMDA5POINTERCRANGEC0,C1,C2,D,O,BRANGEg,gmax,rb,gluc,w,timer,llabelGLOBALErev,mg,Rb,Ru,Rd,Rr,Ro,RcGLOBALvmin,vmaxNONSPECIFIC_CURRENTinmda}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(pS)=(picosiemens)(umho)=(micromho)(mM)=(milli/liter)(uM)=(micro/liter)}PARAMETER{Erev=0(mV)gmax=500(pS)mg=0(mM)vmin=-120(mV)vmax=100(mV)gluc=0.00003(mM)timer=110(ms)llabel=0Rb=5e-3(/uM/ms)Ru=12.9e-3(/ms)Rd=8.4e-3(/ms)Rr=6.8e-3(/ms)Ro=46.5e-3(/ms)Rc=73.8e-3(/ms)}ASSIGNED{v(mV)inmda(nA)g(pS)C(mM)rb(/ms)w}STATE{C0C1C2DOB}INITIAL{rates(v)C0=1llabel=0.0}BREAKPOINT{rates(v)SOLVEkstatesMETHODsparseg=gmax*O*Binmda=(1e-6)*g*(v-Erev)}KINETICkstates{rb=Rb*(1e3)*C~C0<->C1(2*rb,Ru)~C1<->C2(rb,2*Ru)~C2<->D(Rd,Rr)~C2<->O(Ro,Rc)CONSERVEC0+C1+C2+D+O=1}PROCEDURErates(v(mV)){TABLEBDEPENDmgFROMvminTOvmaxWITH200B=1/(1+exp(0.062(/mV)*-v)*(mg/3.57(mM)))}VERBATIMdoublepeak=0.0;doublewriteIV(double(in),double(cc),double(timerr),double(label)){FILE*fp;if(peak*1e10>=in*1e10){peak=in;if(label==1.0){label=0.0;}if(label==2.0){label=0.0;}if(label==3.0){peak=0;}}if((peak*1e10<in*1e10)&&(label!=3.0)){label=label+1.0;if(label==1.0){peak=peak;}elseif(label==3.0){fp=fopen("IV.txt","a");if(fp==NULL){#if0printf("Can'topenIV.txtfile\n");exit(1);#elsehoc_execerror("Can'topenIV.txtfile",(char*)0);#endif}printf("peakvalueis%e\n",peak);fprintf(fp,"%e%e\n",cc,peak);fclose(fp);peak=0.0;}}if((t+dt/2)>timerr){printf("babyone");if(label==0.0){fp=fopen("IV.txt","a");if(fp==NULL){#if0printf("Can'topenIV.txtfile\n");exit(1);#elsehoc_execerror("Can'topenIV.txtfile",(char*)0);#endif}fprintf(fp,"%e%e\n",cc,in);fclose(fp);label=3.0;peak=0.0;}}return(label);}ENDVERBATIM