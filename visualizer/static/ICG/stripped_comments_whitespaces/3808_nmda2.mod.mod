INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{POINT_PROCESSNMDAPOINTERpreRANGEB,C,R,R0,R1,g,gmax,lastrelease,PrethreshNONSPECIFIC_CURRENTiGLOBALCmax,Cdur,Alpha,Beta,Erev,mgGLOBALDeadtime,Rinf,Rtau}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)(mM)=(milli/liter)}PARAMETER{Cmax=1(mM)Cdur=1(ms)Alpha=0.072(/msmM)Beta=0.0066(/ms)Erev=0(mV)Prethresh=0Deadtime=1(ms)gmax(umho)mg=1(mM)}ASSIGNED{v(mV)i(nA)g(umho)C(mM)RR0R1RinfRtau(ms)prelastrelease(ms)B}INITIAL{R=0C=0Rinf=Cmax*Alpha/(Cmax*Alpha+Beta)Rtau=1/((Alpha*Cmax)+Beta)lastrelease=-999}BREAKPOINT{SOLVEreleaseB=mgblock(v)g=gmax*R*Bi=g*(v-Erev)}PROCEDURErelease(){LOCALqq=((t-lastrelease)-Cdur)if(q>Deadtime){if(pre>Prethresh){C=CmaxR0=Rlastrelease=t}}elseif(q<0){}elseif(C==Cmax){R1=RC=0.}if(C>0){R=Rinf+(R0-Rinf)*exptable(-(t-lastrelease)/Rtau)}else{R=R1*exptable(-Beta*(t-(lastrelease+Cdur)))}VERBATIMreturn0;ENDVERBATIM}FUNCTIONexptable(x){TABLEFROM-10TO10WITH2000if((x>-10)&&(x<10)){exptable=exp(x)}else{exptable=0.}}FUNCTIONmgblock(v(mV)){TABLEDEPENDmgFROM-140TO80WITH1000mgblock=1/(1+exp(0.062(/mV)*-v)*(mg/3.57(mM)))}