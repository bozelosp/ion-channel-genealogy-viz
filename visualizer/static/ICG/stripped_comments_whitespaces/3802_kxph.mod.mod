NEURON{SUFFIXkxUSEIONkREADekWRITEikRANGEgbarGLOBALminf,mtau}PARAMETER{gbar=0.010(mho/cm2)q10=3ek(mV)celsiusv(mV)}UNITS{(mA)=(milliamp)(mV)=(millivolt)(pS)=(picosiemens)(um)=(micron)}ASSIGNED{ik(mA/cm2)minfmtau(ms)}STATE{m}BREAKPOINT{SOLVEstatesMETHODcnexpik=gbar*m*(v-ek)}INITIAL{trates(v)m=minf}DERIVATIVEstates{trates(v)m'=(minf-m)/mtau}PROCEDUREtrates(vm){LOCALa,b,qtqt=q10^((celsius-23)/10)a=trap0(vm,-45,0.23,7)b=trap0(vm,-55,-1.2,-5.5)minf=a/(a+b)mtau=1.e3/((a+b)*qt)}FUNCTIONtrap0(v,th,a,q){if(fabs(v-th)>1e-6){trap0=a*(v-th)/(1-exp(-(v-th)/q))}else{trap0=a*q}}