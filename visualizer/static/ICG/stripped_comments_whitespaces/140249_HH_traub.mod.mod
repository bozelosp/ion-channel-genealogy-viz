INDEPENDENT{tFROM0TO1WITH1(ms)}NEURON{SUFFIXhh2USEIONnaREADenaWRITEinaUSEIONkREADekWRITEikRANGEgnabar,gkbar,vtraubNa,vtraubKRANGEm_inf,h_inf,n_infRANGEtau_m,tau_h,tau_nRANGEm_exp,h_exp,n_exp}UNITS{(mA)=(milliamp)(mV)=(millivolt)}PARAMETER{gnabar=0.0(mho/cm2)gkbar=.005(mho/cm2)celsius=36(degC)v(mV)vtraubNa=-63(mV)vtraubK=-63(mV)}STATE{mhn}ASSIGNED{ena(mV)ek(mV)ina(mA/cm2)ik(mA/cm2)il(mA/cm2)m_infh_infn_inftau_mtau_htau_nm_exph_expn_exptadj}BREAKPOINT{SOLVEstatesMETHODcnexpina=gnabar*m*m*m*h*(v-ena)ik=gkbar*n*n*n*n*(v-ek)}DERIVATIVEstates{evaluate_fct(v)m'=(m_inf-m)/tau_mh'=(h_inf-h)/tau_hn'=(n_inf-n)/tau_n}UNITSOFFINITIAL{m=0h=0n=0tadj=3.0^((celsius-36)/10)}PROCEDUREevaluate_fct(v(mV)){LOCALa,b,vNa,vKvNa=v-vtraubNavK=v-vtraubKa=0.32*vtrap(13-vNa,4)b=0.28*vtrap(vNa-40,5)tau_m=1/(a+b)/tadjm_inf=a/(a+b)a=0.128*Exp((17-vNa)/18)b=4/(1+Exp((40-vNa)/5))tau_h=1/(a+b)/tadjh_inf=a/(a+b)a=0.032*vtrap(15-vK,5)b=0.5*Exp((10-vK)/40)tau_n=1/(a+b)/tadjn_inf=a/(a+b)}FUNCTIONvtrap(x,y){if(fabs(x/y)<1e-6){vtrap=y*(1-x/y/2)}else{vtrap=x/(Exp(x/y)-1)}}FUNCTIONExp(x){if(x<-100){Exp=0}else{Exp=exp(x)}}