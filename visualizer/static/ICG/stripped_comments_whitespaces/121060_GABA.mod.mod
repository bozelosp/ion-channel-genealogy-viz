NEURON{POINT_PROCESSGABARANGEgbar,tau_r,tau_d,scale,spkcnt,countflag,i,t1,Erev,qfactNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(umho)=(micromho)}PARAMETER{gbar=0.0021(umho)tau_r=0.5(ms)tau_d=7.5(ms)Erev=-60(mV)saturate=1.2qfact=2}ASSIGNED{g(umho)v(mV)i(nA)t1(ms)y1_add(/ms)y1_loc(/ms)countflagspkcntscale}STATE{y1(/ms)y2}INITIAL{y1_add=0scale=0spkcnt=0countflag=0t1=0y1_loc=0}BREAKPOINT{SOLVEbetadynMETHODcnexpg=gbar*y2i=scale*g*(v-Erev)}DERIVATIVEbetadyn{y1'=-y1/(tau_d/qfact)y2'=y1-y2/(tau_r/qfact)}NET_RECEIVE(weight,y1_loc(/ms)){y1_loc=y1_loc*exp(-(t-t1)/(tau_d/qfact))y1_add=(1-y1_loc/saturate)y1_loc=y1_loc+y1_addy1=y1+y1_addt1=tspkcnt=spkcnt+1scale=weight}