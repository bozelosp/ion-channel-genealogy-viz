NEURON{SUFFIXkdrUSEIONkREADekWRITEikRANGEgkbar,ik}UNITS{(mA)=(milliamp)(mV)=(millivolt)(mS)=(millisiemens)}PARAMETER{gkbar=15(mS/cm2)}ASSIGNED{v(mV)ik(mA/cm2)ninf(1)taun(ms)ek(mV)}STATE{n}INITIAL{rates(v)n=ninf}BREAKPOINT{SOLVEstatesMETHODcnexpik=(1e-3)*gkbar*n*(v-ek)}DERIVATIVEstates{rates(v)n'=(ninf-n)/taun}PROCEDURErates(v(mV)){LOCALa,ba=fun3(v,-24.9,-0.016,-5)b=fun1(v,-40,0.25,-40)ninf=a/(a+b)taun=1.0/(a+b)}FUNCTIONfun1(v(mV),V0(mV),A(/ms),B(mV))(/ms){fun1=A*exp((v-V0)/B)}FUNCTIONfun2(v(mV),V0(mV),A(/ms),B(mV))(/ms){fun2=A/(exp((v-V0)/B)+1)}FUNCTIONfun3(v(mV),V0(mV),A(/ms),B(mV))(/ms){if(fabs((v-V0)/B)<1e-6){fun3=A*B/1(mV)*(1-0.5*(v-V0)/B)}else{fun3=A/1(mV)*(v-V0)/(exp((v-V0)/B)-1)}}FUNCTIONmin(x,y){if(x<=y){min=x}else{min=y}}