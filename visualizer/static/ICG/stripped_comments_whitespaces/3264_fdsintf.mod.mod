NEURON{ARTIFICIAL_CELLFDSIntFireRANGEtau,y,spikedur,refrac,f,tau_F,d1,tau_D1,d2,tau_D2}PARAMETER{tau=10(ms)<1e-9,1e9>spikedur=1(ms)<0,1e9>refrac=5(ms)<0,1e9>f=0.917(1)<0,1e9>tau_F=94(ms)<1e-9,1e9>d1=0.416(1)<0,1>tau_D1=380(ms)<1e-9,1e9>d2=0.975(1)<0,1>tau_D2=9200(ms)<1e-9,1e9>}ASSIGNED{yt0(ms)refractory}INITIAL{y=0t0=trefractory=0}FUNCTIONyy(){yy=y*exp(-(t-t0)/tau)}FUNCTIONFval(F,time){Fval=1+(F-1)*exp(-time/tau_F)}FUNCTIOND1val(D1,time){D1val=1-(1-D1)*exp(-time/tau_D1)}FUNCTIOND2val(D2,time){D2val=1-(1-D2)*exp(-time/tau_D2)}NET_RECEIVE(w,F,D1,D2,tsyn(ms)){INITIAL{F=1D1=1D2=1tsyn=t}if(flag==0){F=Fval(F,t-tsyn)D1=D1val(D1,t-tsyn)D2=D2val(D2,t-tsyn)tsyn=t}if(refractory==0){y=yy()y=y+w*F*D1*D2t0=tif(y>1){refractory=1y=2net_send(spikedur,refractory)net_event(t)}}elseif(flag==1){refractory=2y=-1net_send(refrac,refractory)}elseif(flag==2){refractory=0y=0}if(flag==0){F=F+fD1=D1*d1D2=D2*d2}}