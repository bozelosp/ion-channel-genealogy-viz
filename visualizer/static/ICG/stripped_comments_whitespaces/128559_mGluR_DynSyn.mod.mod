NEURON{POINT_PROCESSmGluR_DynSynUSEIONcaWRITEicaRANGEtau_rise,tau_decayRANGEU1,tau_rec,tau_facRANGEi,g,e,mg,inon,ica,ca_ratioNONSPECIFIC_CURRENTi}UNITS{(nA)=(nanoamp)(mV)=(millivolt)(molar)=(1/liter)(mM)=(millimolar)}PARAMETER{tau_rise=20.0(ms)tau_decay=1000.0(ms)U1=1.0(1)tau_rec=0.1(ms)tau_fac=0.1(ms)e=0.0(mV)mg=1.0(mM)ca_ratio=0.1(1)}ASSIGNED{v(mV)i(nA)g(umho)factorica(nA)inon}STATE{AB}INITIAL{LOCALtpA=0B=0tp=(tau_rise*tau_decay)/(tau_decay-tau_rise)*log(tau_decay/tau_rise)factor=-exp(-tp/tau_rise)+exp(-tp/tau_decay)factor=1/factor}BREAKPOINT{SOLVEstateMETHODcnexpg=B-Ai=g*mgblock(v)*(v-e)ica=ca_ratio*iinon=(1-ca_ratio)*i}DERIVATIVEstate{A'=-A/tau_riseB'=-B/tau_decay}FUNCTIONmgblock(v(mV)){mgblock=1/(1+exp(0.062(/mV)*-v)*(mg/3.57(mM)))}NET_RECEIVE(weight,Pv,P,Use,t0(ms)){INITIAL{P=1Use=0t0=t}Use=Use*exp(-(t-t0)/tau_fac)Use=Use+U1*(1-Use)P=1-(1-P)*exp(-(t-t0)/tau_rec)Pv=Use*PP=P-Use*Pt0=tA=A+weight*factor*PvB=B+weight*factor*Pv}