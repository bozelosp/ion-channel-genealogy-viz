UNITS{(nA)=(milliamp)(mV)=(millivolt)}NEURON{POINT_PROCESSKCaNONSPECIFIC_CURRENTikRANGEdgkbar,egk,ctau,thresh,gk}PARAMETER{dgkbar=0.1(mS/cm2)<0,1e9>egk=-90(mV)ctau=50(ms)thresh=-20(mV)}STATE{c}ASSIGNED{v(mV)area(um2)dgk(uS)gk(uS)ik(nA)}BREAKPOINT{SOLVEstateMETHODcnexpgk=dgk*cik=gk*(v-egk)}INITIAL{dgk=dgkbar*area*1e-5gk=0c=0net_send(0,1)}DERIVATIVEstate{c'=-c/ctau}NET_RECEIVE(null){if(flag==1){WATCH(v>thresh)2}if(flag==2){WATCH(v<thresh)3}if(flag==3){c=c+1at_time(t)net_send(0,1)}}